<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="å¾é‘«"><meta name="copyright" content="å¾é‘«"><meta name="generator" content="Hexo 5.4.2"><meta name="theme" content="hexo-theme-yun"><title>JUCå¹¶å‘ç¼–ç¨‹ | å¾é‘«çš„ç¬”è®°</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.3.3/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"example.com","root":"/","title":"å¾é‘«çš„ç¬”è®°","version":"1.10.6","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","fireworks":{"colors":null},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><meta name="description" content="è¿›ç¨‹ä¸çº¿ç¨‹æ¦‚è¿°è¿›ç¨‹ä¸çº¿ç¨‹è¿›ç¨‹  ç¨‹åºç”±æŒ‡ä»¤å’Œæ•°æ®ç»„æˆï¼Œä½†è¿™äº›æŒ‡ä»¤è¦è¿è¡Œï¼Œæ•°æ®è¦è¯»å†™ï¼Œå°±å¿…é¡»å°†æŒ‡ä»¤åŠ è½½è‡³ CPUï¼Œæ•°æ®åŠ è½½è‡³å†…å­˜ã€‚åœ¨æŒ‡ä»¤è¿è¡Œè¿‡ç¨‹ä¸­è¿˜éœ€è¦ç”¨åˆ°ç£ç›˜ã€ç½‘ç»œç­‰è®¾å¤‡ã€‚è¿›ç¨‹å°±æ˜¯ç”¨æ¥åŠ è½½æŒ‡ä»¤ã€ç®¡ç†å…§å­˜ã€ç®¡ç†T0çš„ å½“ä¸€ä¸ªç¨‹åºè¢«è¿è¡Œï¼Œä»ç£ç›˜åŠ è½½è¿™ä¸ªç¨‹åºçš„ä»£ç è‡³å†…å­˜ï¼Œè¿™æ—¶å°±å¼€å¯äº†ä¸€ä¸ªè¿›ç¨‹ã€‚ è¿›ç¨‹å°±å¯ä»¥è§†ä¸ºç¨‹åºçš„ä¸€ä¸ªå®ä¾‹ã€‚å¤§éƒ¨åˆ†ç¨‹åºå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªå®ä¾‹è¿›ç¨‹ï¼ˆä¾‹å¦‚è®°äº‹æœ¬ã€ç”»å›¾ã€æµè§ˆå™¨ç­‰ï¼‰ï¼Œä¹Ÿæœ‰çš„ç¨‹åºåªèƒ½">
<meta property="og:type" content="article">
<meta property="og:title" content="JUCå¹¶å‘ç¼–ç¨‹">
<meta property="og:url" content="http://example.com/2022/08/08/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/index.html">
<meta property="og:site_name" content="å¾é‘«çš„ç¬”è®°">
<meta property="og:description" content="è¿›ç¨‹ä¸çº¿ç¨‹æ¦‚è¿°è¿›ç¨‹ä¸çº¿ç¨‹è¿›ç¨‹  ç¨‹åºç”±æŒ‡ä»¤å’Œæ•°æ®ç»„æˆï¼Œä½†è¿™äº›æŒ‡ä»¤è¦è¿è¡Œï¼Œæ•°æ®è¦è¯»å†™ï¼Œå°±å¿…é¡»å°†æŒ‡ä»¤åŠ è½½è‡³ CPUï¼Œæ•°æ®åŠ è½½è‡³å†…å­˜ã€‚åœ¨æŒ‡ä»¤è¿è¡Œè¿‡ç¨‹ä¸­è¿˜éœ€è¦ç”¨åˆ°ç£ç›˜ã€ç½‘ç»œç­‰è®¾å¤‡ã€‚è¿›ç¨‹å°±æ˜¯ç”¨æ¥åŠ è½½æŒ‡ä»¤ã€ç®¡ç†å…§å­˜ã€ç®¡ç†T0çš„ å½“ä¸€ä¸ªç¨‹åºè¢«è¿è¡Œï¼Œä»ç£ç›˜åŠ è½½è¿™ä¸ªç¨‹åºçš„ä»£ç è‡³å†…å­˜ï¼Œè¿™æ—¶å°±å¼€å¯äº†ä¸€ä¸ªè¿›ç¨‹ã€‚ è¿›ç¨‹å°±å¯ä»¥è§†ä¸ºç¨‹åºçš„ä¸€ä¸ªå®ä¾‹ã€‚å¤§éƒ¨åˆ†ç¨‹åºå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªå®ä¾‹è¿›ç¨‹ï¼ˆä¾‹å¦‚è®°äº‹æœ¬ã€ç”»å›¾ã€æµè§ˆå™¨ç­‰ï¼‰ï¼Œä¹Ÿæœ‰çš„ç¨‹åºåªèƒ½">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-08_17.41.29.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_10.06.22.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2Fpic1.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_14.00.14.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_14.41.57.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_14.42.14.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_14.54.28.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.07.13.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.02.20.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.10.25.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.14.17.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.15.41.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.21.07.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.24.58.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.29.43.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.28.11.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_14.54.28.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-10_14.00.08.png">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-10_15.05.51.png ">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-10_16.04.10.png ">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-10_16.06.39.png ">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-10_16.05.49.png ">
<meta property="og:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-10_16.31.02.png">
<meta property="article:published_time" content="2022-08-08T05:49:35.197Z">
<meta property="article:modified_time" content="2022-08-10T09:52:35.147Z">
<meta property="article:author" content="å¾é‘«">
<meta property="article:tag" content="JUCå¹¶å‘ç¼–ç¨‹">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-08_17.41.29.png"><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="å¾é‘«"><img width="96" loading="lazy" src="/images/touxiang2.jpg" alt="å¾é‘«"><span class="site-author-status" title="ä¸æƒ³ä¸Šå­¦">ğŸ˜­</span></a><div class="site-author-name"><a href="/about/">å¾é‘«</a></div><span class="site-name">å¾é‘«çš„ç¬”è®°</span><sub class="site-subtitle"></sub><div class="site-description">è®°å½•æ¯ä¸€å¤©æ‰€å­¦</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">5</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">3</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">4</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="æ–‡æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:settings-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://qun.qq.com/qqweb/qunpro/share?_wv=3&amp;_wwv=128&amp;appChannel=share&amp;inviteCode=28OEdR&amp;appChannel=share&amp;businessType=9&amp;from=246610&amp;biz=ka" title="QQ é¢‘é“ - å°äº‘ä¹‹å®¶" target="_blank" style="color:#12B7F5"><span class="icon iconify" data-icon="ri:qq-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/YunYouJun" title="GitHub" target="_blank" style="color:#6e5494"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://cdn.yunyoujun.cn/img/about/white-qrcode-and-search.jpg" title="å¾®ä¿¡" target="_blank" style="color:#1AAD19"><span class="icon iconify" data-icon="ri:wechat-2-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:me@yunyoujun.cn" title="E-Mail" target="_blank" style="color:#8E71C1"><span class="icon iconify" data-icon="ri:mail-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/albums/" title="ç›¸å†Œ" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:camera-fill"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">è¿›ç¨‹ä¸çº¿ç¨‹æ¦‚è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B"><span class="toc-number">1.1.</span> <span class="toc-text">è¿›ç¨‹ä¸çº¿ç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E4%B8%8E%E5%B9%B6%E8%A1%8C"><span class="toc-number">1.2.</span> <span class="toc-text">å¹¶å‘ä¸å¹¶è¡Œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%BC%82%E6%AD%A5"><span class="toc-number">1.3.</span> <span class="toc-text">åŒæ­¥ä¸å¼‚æ­¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%95%88%E7%8E%87%E9%97%AE%E9%A2%98"><span class="toc-number">1.4.</span> <span class="toc-text">å¤šçº¿ç¨‹æ•ˆç‡é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Java%E7%BA%BF%E7%A8%8B"><span class="toc-number">2.</span> <span class="toc-text">Javaçº¿ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E8%BF%90%E8%A1%8C%E7%BA%BF%E7%A8%8B"><span class="toc-number">2.1.</span> <span class="toc-text">åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80"><span class="toc-number">2.1.1.</span> <span class="toc-text">æ–¹æ³•ä¸€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C"><span class="toc-number">2.1.2.</span> <span class="toc-text">æ–¹æ³•äºŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%89"><span class="toc-number">2.1.3.</span> <span class="toc-text">æ–¹æ³•ä¸‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%BA%BF%E7%A8%8B"><span class="toc-number">2.2.</span> <span class="toc-text">æŸ¥çœ‹çº¿ç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B-API"><span class="toc-number">2.3.</span> <span class="toc-text">çº¿ç¨‹ API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#API%E6%80%BB%E8%A7%88"><span class="toc-number">2.3.1.</span> <span class="toc-text">APIæ€»è§ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#run%E5%92%8Cstart"><span class="toc-number">2.3.2.</span> <span class="toc-text">runå’Œstart</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sleep%E5%92%8Cyield"><span class="toc-number">2.3.3.</span> <span class="toc-text">sleepå’Œyield</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#join"><span class="toc-number">2.3.4.</span> <span class="toc-text">join</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#interrupt"><span class="toc-number">2.3.5.</span> <span class="toc-text">interrupt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#park%E6%89%93%E6%96%AD"><span class="toc-number">2.3.6.</span> <span class="toc-text">parkæ‰“æ–­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%97%B6%E6%96%B9%E6%B3%95"><span class="toc-number">2.3.7.</span> <span class="toc-text">è¿‡æ—¶æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Daemon%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B"><span class="toc-number">2.3.8.</span> <span class="toc-text">Daemonå®ˆæŠ¤çº¿ç¨‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81"><span class="toc-number">2.4.</span> <span class="toc-text">çº¿ç¨‹çŠ¶æ€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E7%A7%8D%E7%8A%B6%E6%80%81"><span class="toc-number">2.4.1.</span> <span class="toc-text">äº”ç§çŠ¶æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E7%A7%8D%E7%8A%B6%E6%80%81"><span class="toc-number">2.4.2.</span> <span class="toc-text">å…­ç§çŠ¶æ€</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E7%AB%A0%E5%B0%8F%E7%BB%93"><span class="toc-number">2.5.</span> <span class="toc-text">æœ¬ç« å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9E%8B%E4%B9%8B%E7%AE%A1%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B1%E4%BA%AB%E9%97%AE%E9%A2%98"><span class="toc-number">3.1.</span> <span class="toc-text">å…±äº«é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#java%E4%BB%A3%E7%A0%81%E7%9A%84%E4%BD%93%E7%8E%B0"><span class="toc-number">3.1.1.</span> <span class="toc-text">javaä»£ç çš„ä½“ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%B4%E7%95%8C%E5%8C%BA-Critical-Seetion"><span class="toc-number">3.1.2.</span> <span class="toc-text">ä¸´ç•ŒåŒº Critical Seetion</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%9E%E6%80%81%E6%9D%A1%E4%BB%B6Race-Condition"><span class="toc-number">3.1.3.</span> <span class="toc-text">ç«æ€æ¡ä»¶Race Condition</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#synchronized"><span class="toc-number">3.2.</span> <span class="toc-text">synchronized</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90"><span class="toc-number">3.3.</span> <span class="toc-text">çº¿ç¨‹å®‰å…¨åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90"><span class="toc-number">3.3.1.</span> <span class="toc-text">å˜é‡å®‰å…¨åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%B1%BB"><span class="toc-number">3.3.2.</span> <span class="toc-text">å¸¸è§çº¿ç¨‹å®‰å…¨ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E5%88%86%E6%9E%90"><span class="toc-number">3.3.3.</span> <span class="toc-text">å®ä¾‹åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Monitor%E6%A6%82%E5%BF%B5"><span class="toc-number">3.4.</span> <span class="toc-text">Monitoræ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%A4%B4"><span class="toc-number">3.4.1.</span> <span class="toc-text">å¯¹è±¡å¤´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Monitor"><span class="toc-number">3.4.2.</span> <span class="toc-text">Monitor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%81%E4%BC%98%E5%8C%96"><span class="toc-number">3.4.3.</span> <span class="toc-text">é”ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%BB%E9%87%8F%E7%BA%A7%E9%94%81"><span class="toc-number">3.4.3.1.</span> <span class="toc-text">è½»é‡çº§é”</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%81%E8%86%A8%E8%83%80"><span class="toc-number">3.4.4.</span> <span class="toc-text">é”è†¨èƒ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E6%97%8B%E4%BC%98%E5%8C%96"><span class="toc-number">3.4.5.</span> <span class="toc-text">è‡ªæ—‹ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%81%8F%E5%90%91%E9%94%81"><span class="toc-number">3.4.6.</span> <span class="toc-text">åå‘é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%81%E6%B6%88%E9%99%A4"><span class="toc-number">3.4.7.</span> <span class="toc-text">é”æ¶ˆé™¤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#wait-notify"><span class="toc-number">3.5.</span> <span class="toc-text">wait&#x2F;notify</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86%E4%B9%8Bwait-notify"><span class="toc-number">3.5.1.</span> <span class="toc-text">åŸç†ä¹‹wait&#x2F;notify</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#API%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.5.2.</span> <span class="toc-text">APIä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wait-notify%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8"><span class="toc-number">3.5.3.</span> <span class="toc-text">wait&#x2F;notifyæ­£ç¡®ä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BF%9D%E6%8A%A4%E6%80%A7%E6%9A%82%E5%81%9C"><span class="toc-number">3.5.4.</span> <span class="toc-text">åŒæ­¥æ¨¡å¼ä¹‹ä¿æŠ¤æ€§æš‚åœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%94%9F%E4%BA%A7%E8%80%85%E8%B4%B9%E8%80%85"><span class="toc-number">3.5.5.</span> <span class="toc-text">å¼‚æ­¥æ¨¡å¼ä¹‹ç”Ÿäº§è€…è´¹è€…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Park-amp-Unpark"><span class="toc-number">3.5.6.</span> <span class="toc-text">Park &amp; Unpark</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.6.</span> <span class="toc-text">çº¿ç¨‹çŠ¶æ€è½¬æ¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B4%BB%E8%B7%83%E6%80%A7"><span class="toc-number">3.7.</span> <span class="toc-text">æ´»è·ƒæ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E6%8A%8A%E9%94%81"><span class="toc-number">3.7.1.</span> <span class="toc-text">å¤šæŠŠé”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%BB%E9%94%81"><span class="toc-number">3.7.2.</span> <span class="toc-text">æ­»é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B4%BB%E9%94%81"><span class="toc-number">3.7.3.</span> <span class="toc-text">æ´»é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A5%A5%E9%A5%BF%E7%8E%B0%E8%B1%A1"><span class="toc-number">3.7.4.</span> <span class="toc-text">é¥¥é¥¿ç°è±¡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ReentrantLock"><span class="toc-number">3.8.</span> <span class="toc-text">ReentrantLock</span></a></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="http://example.com/2022/08/08/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="å¾é‘«"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="å¾é‘«çš„ç¬”è®°"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">JUCå¹¶å‘ç¼–ç¨‹</h1><div class="post-meta"><div class="post-time"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2022-08-08 13:49:35" itemprop="dateCreated datePublished" datetime="2022-08-08T13:49:35+08:00">2022-08-08</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-08-10 17:52:35" itemprop="dateModified" datetime="2022-08-10T17:52:35+08:00">2022-08-10</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/Java/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Java</span></a></span> > <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/Java/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">JUCå¹¶å‘ç¼–ç¨‹</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">JUCå¹¶å‘ç¼–ç¨‹</span></a><a class="tag-item" href="/tags/java/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">java</span></a></span></div><div class="post-author"><span class="author-name">å¾é‘«</span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h1 id="è¿›ç¨‹ä¸çº¿ç¨‹æ¦‚è¿°"><a href="#è¿›ç¨‹ä¸çº¿ç¨‹æ¦‚è¿°" class="headerlink" title="è¿›ç¨‹ä¸çº¿ç¨‹æ¦‚è¿°"></a>è¿›ç¨‹ä¸çº¿ç¨‹æ¦‚è¿°</h1><h2 id="è¿›ç¨‹ä¸çº¿ç¨‹"><a href="#è¿›ç¨‹ä¸çº¿ç¨‹" class="headerlink" title="è¿›ç¨‹ä¸çº¿ç¨‹"></a>è¿›ç¨‹ä¸çº¿ç¨‹</h2><p><strong>è¿›ç¨‹</strong></p>
<ul>
<li>ç¨‹åºç”±æŒ‡ä»¤å’Œæ•°æ®ç»„æˆï¼Œä½†è¿™äº›æŒ‡ä»¤è¦è¿è¡Œï¼Œæ•°æ®è¦è¯»å†™ï¼Œå°±å¿…é¡»å°†æŒ‡ä»¤åŠ è½½è‡³ CPUï¼Œæ•°æ®åŠ è½½è‡³å†…å­˜ã€‚åœ¨æŒ‡ä»¤è¿è¡Œè¿‡ç¨‹ä¸­è¿˜éœ€è¦ç”¨åˆ°ç£ç›˜ã€ç½‘ç»œç­‰è®¾å¤‡ã€‚è¿›ç¨‹å°±æ˜¯ç”¨æ¥åŠ è½½æŒ‡ä»¤ã€ç®¡ç†å…§å­˜ã€ç®¡ç†T0çš„</li>
<li>å½“ä¸€ä¸ªç¨‹åºè¢«è¿è¡Œï¼Œä»ç£ç›˜åŠ è½½è¿™ä¸ªç¨‹åºçš„ä»£ç è‡³å†…å­˜ï¼Œè¿™æ—¶å°±å¼€å¯äº†ä¸€ä¸ªè¿›ç¨‹ã€‚</li>
<li>è¿›ç¨‹å°±å¯ä»¥è§†ä¸ºç¨‹åºçš„ä¸€ä¸ªå®ä¾‹ã€‚å¤§éƒ¨åˆ†ç¨‹åºå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªå®ä¾‹è¿›ç¨‹ï¼ˆä¾‹å¦‚è®°äº‹æœ¬ã€ç”»å›¾ã€æµè§ˆå™¨ç­‰ï¼‰ï¼Œä¹Ÿæœ‰çš„ç¨‹åºåªèƒ½å¯åŠ¨ä¸€ä¸ªå®ä¾‹è¿›ç¨‹ï¼ˆä¾‹å¦‚ç½‘æ˜“äº‘éŸ³ä¹ã€360 å®‰å…¨å«å£«ç­‰ï¼‰</li>
</ul>
<p><strong>çº¿ç¨‹</strong></p>
<ul>
<li>ä¸€ä¸ªè¿›ç¨‹ä¹‹å†…å¯ä»¥åˆ†ä¸ºä¸€åˆ°å¤šä¸ªçº¿ç¨‹ã€‚</li>
<li>ä¸€ä¸ªçº¿ç¨‹å°±æ˜¯ä¸€ä¸ªæŒ‡ä»¤æµï¼Œå°†æŒ‡ä»¤æµä¸­çš„ä¸€æ¡æ¡æŒ‡ä»¤ä»¥ä¸€å®šçš„é¡ºåºäº¤ç»™ CPU æ‰§è¡Œ</li>
<li>Java ä¸­ï¼Œçº¿ç¨‹ä½œä¸ºæœ€å°è°ƒåº¦å•ä½ï¼Œè¿›ç¨‹ä½œä¸ºèµ„æºåˆ†é…çš„æœ€å°å•ä½ã€‚åœ¨ windows ä¸­è¿›ç¨‹æ˜¯ä¸æ´»åŠ¨çš„ï¼Œåªæ˜¯ä½œä¸ºçº¿ç¨‹çš„å®¹å™¨</li>
</ul>
<p><strong>äºŒè€…å¯¹æ¯”</strong></p>
<ul>
<li>è¿›ç¨‹åŸºæœ¬ä¸Šç›¸äº’ç‹¬ç«‹çš„ï¼Œè€Œçº¿ç¨‹å­˜åœ¨äºè¿›ç¨‹å†…ï¼Œæ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå­é›†</li>
<li>è¿›ç¨‹æ‹¥æœ‰å…±äº«çš„èµ„æºï¼Œå¦‚å†…å­˜ç©ºé—´ç­‰ï¼Œä¾›å…¶å†…éƒ¨çš„çº¿ç¨‹å…±äº«</li>
<li>è¿›ç¨‹é—´é€šä¿¡è¾ƒä¸ºå¤æ‚</li>
<li>åŒä¸€å°è®¡ç®—æœºçš„è¿›ç¨‹é€šä¿¡ç§°ä¸º IPC (Inter-process communication)</li>
<li>ä¸åŒè®¡ç®—æœºä¹‹é—´çš„è¿›ç¨‹é€šä¿¡ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œï¼Œå¹¶éµå®ˆå…±åŒçš„åè®®ï¼Œä¾‹å¦‚ HTTP</li>
<li>çº¿ç¨‹é€šä¿¡ç›¸å¯¹ç®€å•ï¼Œå› ä¸ºå®ƒä»¬å…±äº«è¿›ç¨‹å†…çš„å†…å­˜ï¼Œä¸€ä¸ªä¾‹å­æ˜¯å¤šä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®åŒä¸€ä¸ªå…±äº«å˜é‡</li>
<li>çº¿ç¨‹æ›´è½»é‡ï¼Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬ä¸€èˆ¬ä¸Šè¦æ¯”è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ä½</li>
</ul>
<h2 id="å¹¶å‘ä¸å¹¶è¡Œ"><a href="#å¹¶å‘ä¸å¹¶è¡Œ" class="headerlink" title="å¹¶å‘ä¸å¹¶è¡Œ"></a>å¹¶å‘ä¸å¹¶è¡Œ</h2><table>
    <tr>
        <td>å¹¶å‘(concurrentï¼‰æ˜¯åŒä¸€æ—¶é—´åº”å¯¹å¤šä»¶äº‹æƒ…çš„èƒ½åŠ›</td>
        <td>å¹¶è¡Œï¼ˆparallelï¼‰æ˜¯åŒä¸€æ—¶é—´åŠ¨æ‰‹åšå¤šä»¶äº‹æƒ…çš„èƒ½åŠ›</td>
    </tr>
    <tr>
        <td style="width:35%"><img
                src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/image-20220808113518496.png"></td>
        <td style="width:35%"><img
                src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/image-20220808134702662.png"></td>
    </tr>
</table>

<h2 id="åŒæ­¥ä¸å¼‚æ­¥"><a href="#åŒæ­¥ä¸å¼‚æ­¥" class="headerlink" title="åŒæ­¥ä¸å¼‚æ­¥"></a>åŒæ­¥ä¸å¼‚æ­¥</h2><p>ä»æ–¹æ³•è°ƒç”¨çš„è§’åº¦æ¥è®²ï¼Œå¦‚æœ</p>
<ul>
<li>éœ€è¦ç­‰å¾…ç»“æœè¿”å›ï¼Œæ‰èƒ½ç»§ç»­è¿è¡Œå°±æ˜¯åŒæ­¥</li>
<li>ä¸éœ€è¦ç­‰å¾…ç»“æœè¿”å›ï¼Œå°±èƒ½ç»§ç»­è¿è¡Œå°±æ˜¯å¼‚æ­¥</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šåŒæ­¥åœ¨å¤šçº¿ç¨‹ä¸­è¿˜æœ‰å¦å¤–ä¸€å±‚æ„æ€ï¼Œæ˜¯è®©å¤šä¸ªçº¿ç¨‹æ­¥è°ƒä¸€è‡´    </p>
</blockquote>
<h2 id="å¤šçº¿ç¨‹æ•ˆç‡é—®é¢˜"><a href="#å¤šçº¿ç¨‹æ•ˆç‡é—®é¢˜" class="headerlink" title="å¤šçº¿ç¨‹æ•ˆç‡é—®é¢˜"></a>å¤šçº¿ç¨‹æ•ˆç‡é—®é¢˜</h2><ul>
<li>å•æ ¸ cpuä¸‹ï¼Œå¤šçº¿ç¨‹ä¸èƒ½å®é™…æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡ï¼Œåªæ˜¯ä¸ºäº†èƒ½å¤Ÿåœ¨ä¸åŒçš„ä»»åŠ¡ä¹‹é—´åˆ‡æ¢ï¼Œä¸åŒçº¿ç¨‹è½®æµä½¿ç”¨cpuï¼Œä¸è‡³äºä¸€ä¸ªçº¿ç¨‹æ€»å ç”¨ cpuï¼Œåˆ«çš„çº¿ç¨‹æ²¡æ³•å¹²æ´»</li>
<li>å¤šæ ¸ cpu å¯ä»¥å¹¶è¡Œè·‘å¤šä¸ªçº¿ç¨‹ï¼Œä½†èƒ½å¦æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡è¿˜æ˜¯è¦åˆ†æƒ…å†µçš„æœ‰äº›ä»»åŠ¡ï¼Œç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œå°†ä»»åŠ¡æ‹†åˆ†ï¼Œå¹¶è¡Œæ‰§è¡Œï¼Œå½“ç„¶å¯ä»¥æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚ä½†ä¸æ˜¯æ‰€æœ‰è®¡ç®—ä»»åŠ¡éƒ½èƒ½æ‹†åˆ†ï¼ˆå‚è€ƒåæ–‡çš„ã€é˜¿å§†è¾¾å°”å®šå¾‹ã€‘ï¼‰ä¹Ÿä¸æ˜¯æ‰€æœ‰ä»»åŠ¡éƒ½éœ€è¦æ‹†åˆ†ï¼Œä»»åŠ¡çš„ç›®çš„å¦‚æœä¸åŒï¼Œè°ˆæ‹†åˆ†å’Œæ•ˆç‡æ²¡å•¥æ„ä¹‰</li>
<li>IO æ“ä½œä¸å ç”¨ cpuï¼Œåªæ˜¯æˆ‘ä»¬ä¸€èˆ¬æ‹·è´æ–‡ä»¶ä½¿ç”¨çš„æ˜¯ã€é˜»å¡10ã€‘ï¼Œè¿™æ—¶ç›¸å½“äºçº¿ç¨‹è™½ç„¶ä¸ç”¨ epuï¼Œä½†éœ€è¦ä¸€ç›´ç­‰å¾… 10 ç»“æŸï¼Œæ²¡èƒ½å……åˆ†åˆ©ç”¨çº¿ç¨‹ã€‚æ‰€ä»¥æ‰æœ‰åé¢çš„ã€éé˜»å¡10ã€‘ å’Œã€å¼‚æ­¥ IOã€‘ä¼˜åŒ– </li>
</ul>
<h1 id="Javaçº¿ç¨‹"><a href="#Javaçº¿ç¨‹" class="headerlink" title="Javaçº¿ç¨‹"></a>Javaçº¿ç¨‹</h1><h2 id="åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹"><a href="#åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹" class="headerlink" title="åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹"></a>åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹</h2><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p><strong>ä½¿ç”¨ThreadåŒ¿åå†…éƒ¨ç±»åˆ›å»º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class day01 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Thread thread = new Thread(()-&gt;&#123;</span><br><span class="line">            System.out.println(&quot;åŒ¿åå†…éƒ¨ç±»åˆ›å»ºçº¿ç¨‹&quot;);</span><br><span class="line">        &#125;);</span><br><span class="line">        thread.setName(&quot;T1&quot;);</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p>ä½¿ç”¨ Runnable é…åˆ Thread<br>æŠŠã€çº¿ç¨‹ã€‘å’Œã€ä»»åŠ¡ã€‘ï¼ˆè¦æ‰§è¡Œçš„ä»£ç ï¼‰åˆ†å¼€<br>Thread ä»£è¡¨çº¿ç¨‹<br>Runnable å¯è¿è¡Œçš„ä»»åŠ¡ï¼ˆçº¿ç¨‹è¦æ‰§è¡Œçš„ä»£ç ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class day01 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Runnable runnable =new Runnable() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                System.out.println(&quot;ä½¿ç”¨Runnableè¾…åŠ©Threadåˆ›å»ºçº¿ç¨‹&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread thread = new Thread(runnable,&quot;T1&quot;);</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>lambdaç®€åŒ–</strong></p>
<blockquote>
<p>å¸¦æœ‰@FunctionalInterfaceæ³¨è§£çš„ç±»å¯ä»¥ä½¿ç”¨lambdaç®€åŒ–</p>
</blockquote>
<p><strong>æ–¹æ³•ä¸€å’Œæ–¹æ³•äºŒçš„åº•å±‚åŸç†</strong></p>
<blockquote>
<p>æ–¹æ³•ä¸€å®é™…ä¸Šé‡å†™äº†Threadçš„runæ–¹æ³•ï¼Œè°ƒç”¨startä¼šè¿è¡Œè¿™ä¸ªrunæ–¹æ³•<br>æ–¹æ³•äºŒå®é™…ä¸Šåœ¨æ„é€ æ–¹æ³•é‡Œå°†runableå¯¹è±¡ç»™äº†Threadçš„ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œå¹¶ä¸”runæ–¹æ³•é‡Œä¼šåˆ¤æ–­æ˜¯å¦æœ‰è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœæœ‰è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„runæ–¹æ³•</p>
</blockquote>
<p><strong>å°ç»“</strong></p>
<ul>
<li>æ–¹æ³•1æ˜¯æŠŠçº¿ç¨‹å’Œä»»åŠ¡åˆå¹¶åœ¨äº†ä¸€èµ·ï¼Œæ–¹æ³•2æ˜¯æŠŠçº¿ç¨‹å’Œä»»åŠ¡åˆ†å¼€äº†</li>
<li>ç”¨Runnable æ›´å®¹æ˜“ä¸çº¿ç¨‹æ± ç­‰é«˜çº§ API é…åˆ</li>
<li>ç”¨ Runable è®©ä»»åŠ¡ç±»è„±ç¦»äº† Thread ç»§æ‰¿ä½“ç³»ï¼Œæ›´çµæ´»</li>
</ul>
<h3 id="æ–¹æ³•ä¸‰"><a href="#æ–¹æ³•ä¸‰" class="headerlink" title="æ–¹æ³•ä¸‰"></a>æ–¹æ³•ä¸‰</h3><p>ä½¿ç”¨æœªæ¥ä»»åŠ¡å¯¹è±¡è¾…åŠ©Threadåˆ›å»ºçº¿ç¨‹<br>æœªæ¥ä»»åŠ¡å¯¹è±¡å®é™…ä¸Šä¹Ÿç®—æ˜¯Runableå¯¹è±¡å› ä¸ºå®ç°äº†æ¥å£ï¼ŒåŒæ—¶ä¹Ÿå®ç°äº†å…¶ä»–æ¥å£ï¼Œç”¨äºè·å–è¿”å›å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class day01 &#123;</span><br><span class="line">    public static void main(String[] args) throws ExecutionException, InterruptedException &#123;</span><br><span class="line">        FutureTask&lt;Integer&gt; futureTask = new FutureTask&lt;&gt;(new Callable&lt;Integer&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public Integer call() throws Exception &#123;</span><br><span class="line">                System.out.println(&quot;ä½¿ç”¨æœªæ¥ä»»åŠ¡å¯¹è±¡åˆ›å»ºçº¿ç¨‹&quot;);</span><br><span class="line">                Thread.sleep(1000);//ç­‰å¾…1s</span><br><span class="line">                return 100;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        Thread thread = new Thread(futureTask,&quot;T1&quot;);</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(futureTask.get());//ä¸»çº¿ç¨‹è¿è¡Œåˆ°æ­¤å¤„ä¼šå µå¡ï¼Œç›´åˆ°å­çº¿ç¨‹è¿è¡Œå®Œæˆè¿”å›</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹çº¿ç¨‹"><a href="#æŸ¥çœ‹çº¿ç¨‹" class="headerlink" title="æŸ¥çœ‹çº¿ç¨‹"></a>æŸ¥çœ‹çº¿ç¨‹</h2><p><strong>linux</strong></p>
<blockquote>
<p>ps -ef |grep java æŸ¥çœ‹javaè¿›ç¨‹</p>
</blockquote>
<p><strong>java</strong></p>
<blockquote>
<ul>
<li>jps å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰ Java è¿›ç¨‹</li>
<li>jstack <PID> æŸ¥çœ‹æŸä¸ª Java è¿›ç¨‹ï¼ˆPIDï¼‰çš„æ‰€æœ‰çº¿ç¨‹çŠ¶æ€</li>
<li>jconsole æ¥æŸ¥çœ‹æŸä¸ª Java è¿›ç¨‹ä¸­çº¿ç¨‹çš„è¿è¡Œæƒ…å†µï¼ˆå›¾å½¢ç•Œé¢ï¼‰</li>
</ul>
</blockquote>
<p><strong>æ ˆä¸æ ˆå¸§</strong></p>
<blockquote>
<p>Java Virtual Machine Stacks (Java è™šæ‹Ÿæœºæ ˆï¼‰<br>æˆ‘ä»¬éƒ½çŸ¥é“JVMä¸­ç”±å †ã€æ ˆã€æ–¹æ³•åŒºæ‰€ç»„æˆï¼Œå…¶ä¸­æ ˆå†…å­˜æ˜¯ç»™è°ç”¨çš„å‘¢ï¼Ÿå…¶å®å°±æ˜¯çº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å¯åŠ¨åï¼Œè™šæ‹Ÿæœºå°±ä¼šä¸ºå…¶åˆ†é…ä¸€å—æ ˆå†…å­˜ã€‚<br>æ¯ä¸ªæ ˆç”±å¤šä¸ªæ ˆå¸§ï¼ˆFrameï¼‰ç»„æˆï¼Œå¯¹åº”ç€æ¯æ¬¡æ–¹æ³•è°ƒç”¨æ—¶æ‰€å ç”¨çš„å†…å­˜<br>æ¯ä¸ªçº¿ç¨‹åªèƒ½æœ‰ä¸€ä¸ªæ´»åŠ¨æ ˆå¸§ï¼Œå¯¹åº”ç€å½“å‰æ­£åœ¨æ‰§è¡Œçš„é‚£ä¸ªæ–¹æ³•</p>
</blockquote>
<p><strong>çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢</strong><br>çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢(Thread Context Switch)<br>å› ä¸ºä»¥ä¸‹ä¸€äº›åŸå› å¯¼è‡´ cpu ä¸å†æ‰§è¡Œå½“å‰çš„çº¿ç¨‹ï¼Œè½¬è€Œæ‰§è¡Œå¦ä¸€ä¸ªçº¿ç¨‹çš„ä»£ç </p>
<ul>
<li>çº¿ç¨‹çš„ cpu æ—¶é—´ç‰‡ç”¨å®Œ</li>
<li>åƒåœ¾å›æ”¶</li>
<li>æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹éœ€è¦è¿è¡Œ</li>
<li>çº¿ç¨‹è‡ªå·±è°ƒç”¨äº† sleepã€ yieldã€ waitã€ joinã€ parkã€ synchronizedã€ lock ç­‰æ–¹æ³•</li>
</ul>
<blockquote>
<p>å½“ Context Switch å‘ç”Ÿæ—¶ï¼Œéœ€è¦ç”±æ“ä½œç³»ç»Ÿä¿å­˜å½“å‰çº¿ç¨‹çš„çŠ¶æ€ï¼Œå¹¶æ¢å¤å¦ä¸€ä¸ªçº¿ç¨‹çš„çŠ¶æ€ï¼ŒJava ä¸­å¯¹åº”çš„æ¦‚å¿µå°±æ˜¯ç¨‹åºè®¡æ•°å™¨(Program Counter Registerï¼‰ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®°ä½ä¸‹ä¸€æ¡jvmæŒ‡ä»¤çš„æ‰§è¡Œåœ°å€ï¼Œæ˜¯çº¿ç¨‹ç§æœ‰çš„<br>çŠ¶æ€åŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆä¸­æ¯ä¸ªæ ˆå¸§çš„ä¿¡æ¯ï¼Œå¦‚å±€éƒ¨å˜é‡ã€æ“ä½œæ•°æ ˆã€è¿”å›åœ°å€ç­‰<br>Context Switch é¢‘ç¹å‘ç”Ÿä¼šå½±å“æ€§èƒ½</p>
</blockquote>
<h2 id="çº¿ç¨‹-API"><a href="#çº¿ç¨‹-API" class="headerlink" title="çº¿ç¨‹ API"></a>çº¿ç¨‹ API</h2><h3 id="APIæ€»è§ˆ"><a href="#APIæ€»è§ˆ" class="headerlink" title="APIæ€»è§ˆ"></a>APIæ€»è§ˆ</h3><table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>static</th>
<th>åŠŸèƒ½è¯´æ˜</th>
<th>æ³¨æ„</th>
</tr>
</thead>
<tbody><tr>
<td>start()</td>
<td></td>
<td>å¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œåœ¨æ–°çº¿ç¨‹è¿è¡Œrunæ–¹æ³•ä¸­çš„ä»£ç </td>
<td>startåªæ˜¯è®©çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œé‡Œé¢çš„ä»£ç ä¸ä¸€å®šç«‹åˆ»è¿è¡Œ(CPUçš„æ—¶é—´ç‰‡è¿˜æ²¡è½®åˆ°å®ƒ)æ¯ä¸ªçº¿ç¨‹å¯¹è±¡çš„startåªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œå¦‚æœå¤šæ¬¡è°ƒç”¨ä¼šå‡ºç°IllegalThreadStateException</td>
</tr>
<tr>
<td>run()</td>
<td></td>
<td>æ–°çº¿ç¨‹å¯åŠ¨åä¼šè°ƒç”¨çš„æ–¹æ³•</td>
<td>å¦‚æœåœ¨æ„é€ Threadå¯¹è±¡æ—¶ä¼ é€’äº†Runableå‚æ•°ï¼Œåˆ™çº¿ç¨‹å¯åŠ¨ä¼šè°ƒç”¨Runableçš„runæ–¹æ³•ï¼Œå¦åˆ™é»˜è®¤ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚ä½†æ˜¯é€šå¸¸ä¼šåˆ›å»ºThreadçš„å¯¹è±¡é‡å†™runã€‚</td>
</tr>
<tr>
<td>join()</td>
<td></td>
<td>ç­‰å¾…çº¿ç¨‹è¿è¡Œç»“æŸ</td>
<td></td>
</tr>
<tr>
<td>join(long)</td>
<td></td>
<td>ç­‰å¾…çº¿ç¨‹è¿è¡Œç»“æŸ</td>
<td></td>
</tr>
<tr>
<td>getId()</td>
<td></td>
<td>è·å–çº¿ç¨‹å”¯ä¸€id</td>
<td></td>
</tr>
<tr>
<td>getName()</td>
<td></td>
<td>è·å–çº¿ç¨‹åå­—</td>
<td></td>
</tr>
<tr>
<td>setName()</td>
<td></td>
<td>è®¾ç½®çº¿ç¨‹åå­—</td>
<td></td>
</tr>
<tr>
<td>getPriority()</td>
<td></td>
<td>è·å–çº¿ç¨‹ä¼˜å…ˆçº§</td>
<td></td>
</tr>
<tr>
<td>setPriority(int)</td>
<td></td>
<td>ä¿®æ”¹çº¿ç¨‹ä¼˜å…ˆçº§</td>
<td>javaä¸­è§„å®šçº¿ç¨‹ä¼˜å…ˆçº§æ˜¯1-10æ•´æ•°ï¼Œè¾ƒå¤§ä¼˜å…ˆçº§èƒ½æé«˜è¢«cpuçš„è°ƒåº¦æœºç‡</td>
</tr>
<tr>
<td>getState()</td>
<td></td>
<td>è·å–çº¿ç¨‹çŠ¶æ€</td>
<td>javaä¸­çº¿ç¨‹çŠ¶æ€ä¸€å…±æ˜¯6ä¸ªenumè¡¨ç¤º</td>
</tr>
<tr>
<td>isInterrupted()</td>
<td></td>
<td>åˆ¤æ–­æ˜¯å¦è¢«æ‰“æ–­</td>
<td>ä¸ä¼šæ¸…é™¤æ‰“æ–­çš„æ ‡è®°</td>
</tr>
<tr>
<td>isAlive()</td>
<td></td>
<td>çº¿ç¨‹æ˜¯å¦å­˜æ´»</td>
<td></td>
</tr>
<tr>
<td>interrupt()</td>
<td></td>
<td>æ‰“æ–­çº¿ç¨‹</td>
<td>å¦‚æœè¢«æ‰“æ–­çº¿ç¨‹æ­£åœ¨sleep,wait,joinä¼šå¯¼è‡´è¢«æ‰“æ–­çš„çº¿ç¨‹æŠ›å‡ºInterruptedExceptionï¼Œå¹¶æ¸…é™¤æ‰“æ–­æ ‡è®°;å¦‚æœæ‰“æ–­çš„æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Œåˆ™ä¼šè®¾ç½®æ‰“æ–­æ ‡è®°ï¼›parkçš„çº¿ç¨‹è¢«æ‰“æ–­ï¼Œä¹Ÿä¼šè®¾ç½®æ‰“æ–­æ ‡è®°</td>
</tr>
<tr>
<td>interrupted()</td>
<td>static</td>
<td>åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦è¢«æ‰“æ–­</td>
<td>ä¼šæ¸…é™¤æ‰“æ–­æ ‡è®°</td>
</tr>
<tr>
<td>currentThread()</td>
<td>static</td>
<td>è·å–å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹</td>
<td></td>
</tr>
<tr>
<td>sleep(long)</td>
<td>static</td>
<td>è®©å½“å‰æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ næ¯«ç§’ï¼Œè®©å‡ºæ—¶é—´ç‰‡</td>
<td></td>
</tr>
<tr>
<td>yield()</td>
<td>static</td>
<td>æç¤ºè°ƒåº¦å™¨è®©å‡ºå½“å‰çº¿ç¨‹cpuçš„ä½¿ç”¨</td>
<td>ä¸»è¦æ˜¯ä¸ºäº†æµ‹è¯•å’Œè°ƒè¯•</td>
</tr>
</tbody></table>
<h3 id="runå’Œstart"><a href="#runå’Œstart" class="headerlink" title="runå’Œstart"></a>runå’Œstart</h3><blockquote>
<p>ä¸»æ–¹æ³•ä¸­å¿…é¡»è°ƒç”¨startæ–¹æ³•è€Œä¸æ˜¯runï¼Œè°ƒç”¨runæ–¹æ³•ä¼šè·‘å®ä¾‹æ–¹æ³•ï¼Œè€Œä¸æ˜¯å¼€å¯ä¸€ä¸ªçº¿ç¨‹è·‘runæ–¹æ³•ã€‚<br>startä¸èƒ½å¤šæ¬¡è°ƒç”¨ï¼Œåªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œå¦åˆ™ä¼šæŠ›å‡ºIllegalThreadStateException<br>Threadåˆå§‹åŒ–æ—¶çº¿ç¨‹çŠ¶æ€æ˜¯newï¼Œè°ƒç”¨startåæ˜¯runnable</p>
</blockquote>
<h3 id="sleepå’Œyield"><a href="#sleepå’Œyield" class="headerlink" title="sleepå’Œyield"></a>sleepå’Œyield</h3><p><strong>sleep</strong></p>
<blockquote>
<ol>
<li>è°ƒç”¨ sleep ä¼šè®©å½“å‰çº¿ç¨‹ä» Runing è¿›å…¥ Timed_waiting çŠ¶æ€</li>
<li>å…¶å®ƒçº¿ç¨‹å¯ä»¥ä½¿ç”¨ interrupt æ–¹æ³•æ‰“æ–­æ­£åœ¨ç¡çœ çš„çº¿ç¨‹ï¼Œè¿™æ—¶ sleep æ–¹æ³•ä¼šæŠ›å‡º InterruptedException</li>
<li>ç¡çœ ç»“æŸåçš„çº¿ç¨‹æœªå¿…ä¼šç«‹åˆ»å¾—åˆ°æ‰§è¡Œ</li>
<li>å»ºè®®ç”¨ TimeUnit çš„ sleep ä»£æ›¿ Thread çš„ sleep æ¥è·å¾—æ›´å¥½çš„å¯è¯»æ€§</li>
</ol>
</blockquote>
<p><strong>yield</strong></p>
<blockquote>
<ol>
<li>è°ƒç”¨ yield ä¼šè®©å½“å‰çº¿ç¨‹ä» Runing è¿›å…¥Rumable çŠ¶æ€ï¼Œç„¶åè°ƒåº¦æ‰§è¡Œå…¶å®ƒåŒä¼˜å…ˆçº§çš„çº¿ç¨‹ã€‚å¦‚æœè¿™æ—¶æ²¡æœ‰åŒä¼˜å…ˆçº§çš„çº¿ç¨‹ï¼Œé‚£ä¹ˆä¸èƒ½ä¿è¯è®©å½“å‰çº¿ç¨‹æš‚åœçš„æ•ˆæœ</li>
<li>å…·ä½“çš„å®ç°ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„ä»»åŠ¡è°ƒåº¦å™¨</li>
</ol>
</blockquote>
<p><strong>çº¿ç¨‹ä¼˜å…ˆçº§</strong></p>
<blockquote>
<p>çº¿ç¨‹ä¼˜å…ˆçº§ä¼šæç¤ºï¼ˆhintï¼‰è°ƒåº¦å™¨ä¼˜å…ˆè°ƒåº¦è¯¥çº¿ç¨‹ï¼Œä½†å®ƒä»…ä»…æ˜¯ä¸€ä¸ªæç¤ºï¼Œè°ƒåº¦å™¨å¯ä»¥å¿½ç•¥å®ƒ<br>å¦‚æœ cpu æ¯”è¾ƒå¿™ï¼Œé‚£ä¹ˆä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ä¼šè·å¾—æ›´å¤šçš„æ—¶é—´ç‰‡ï¼Œä½† cpu é—²æ—¶ï¼Œä¼˜å…ˆçº§å‡ ä¹æ²¡ä½œç”¨</p>
</blockquote>
<p><strong>å¯¹æ¯”</strong></p>
<blockquote>
<ol>
<li>yieldæ˜¯è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œsleepæ˜¯ç­‰å¾…çŠ¶æ€ï¼Œå°±ç»ªçŠ¶æ€æ˜¯æœ‰å¯èƒ½è¢«è°ƒåº¦è¿è¡Œçš„ï¼Œè€Œç­‰å¾…å°±ä¸€å®šä¸ä¼š</li>
<li>sleepæœ‰ä¸€ä¸ªç­‰å¾…æ—¶é—´ï¼Œè€Œyieldæ˜¯æ²¡æœ‰ç­‰å¾…æ—¶é—´çš„</li>
<li>yieldå’Œçº¿ç¨‹ä¼˜å…ˆçº§éƒ½ä¸èƒ½çœŸæ­£æ§åˆ¶æ—¶é—´è°ƒåº¦ï¼Œè€Œåœ¨ä¸€ä¸ªå¤§èŒƒå›´çš„å¯ä»¥åšåˆ°å°½é‡è®©å‡º</li>
</ol>
</blockquote>
<p><strong>sleepé˜²æ­¢cpu100%</strong><br>åœ¨æ²¡æœ‰åˆ©ç”¨cpuæ¥è®¡ç®—æ—¶ï¼Œä¸è¦è®© while(true)ç©ºè½¬æµªè´¹cpuï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ yield æˆ– sleep æ¥è®©å‡º cpu çš„ä½¿ç”¨æƒç»™å…¶ä»–ç¨‹åº</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class day01 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        while (true) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                Thread.sleep(50);</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="join"><a href="#join" class="headerlink" title="join"></a>join</h3><p>ä½œç”¨ï¼šå¤šçº¿ç¨‹å¼‚æ­¥æ‰§è¡Œå…±äº«è¿è¡Œæ—¶é—´ï¼Œç­‰å¾…æ‰€æœ‰çº¿ç¨‹è¿è¡Œå®Œæ¯•è·å–ç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">long start = System.currentTimeMillis();</span><br><span class="line">        Thread thread1 = new Thread(() -&gt; &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        Thread thread2 = new Thread(() -&gt; &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                Thread.sleep(2000);</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        thread1.join();</span><br><span class="line">        thread2.join();</span><br><span class="line">        long end = System.currentTimeMillis();</span><br><span class="line">        System.out.println((end - start) / 1000+&quot;ç§’&quot;);</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2ç§’</span><br></pre></td></tr></table></figure>
<h3 id="interrupt"><a href="#interrupt" class="headerlink" title="interrupt"></a>interrupt</h3><p><strong>æ‰“æ–­ sleep, wait, join çš„çº¿ç¨‹</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Thread thread1 = new Thread(() -&gt; &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        Thread.sleep(1000);</span><br><span class="line">    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(Thread.currentThread().isInterrupted());</span><br><span class="line">&#125;);</span><br><span class="line">Thread.sleep(500);</span><br><span class="line">thread1.start();</span><br><span class="line">thread1.interrupt();</span><br></pre></td></tr></table></figure>
<p><strong>è¾“å‡º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.lang.InterruptedException: sleep interrupted</span><br><span class="line">	at java.lang.Thread.sleep(Native Method)</span><br><span class="line">	at day01.lambda$main$0(day01.java:10)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line">false</span><br></pre></td></tr></table></figure>

<p><strong>æ‰“æ–­æ­£å¸¸è¿è¡Œçš„çº¿ç¨‹</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Thread thread1 = new Thread(() -&gt; &#123;</span><br><span class="line">    while (true) &#123;</span><br><span class="line">        boolean isInterrupted = Thread.currentThread().isInterrupted();</span><br><span class="line">        if (isInterrupted) &#123;</span><br><span class="line">            System.out.println(&quot;è¢«æ‰“æ–­äº†&quot;);</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">Thread.sleep(500);</span><br><span class="line">thread1.start();</span><br><span class="line">thread1.interrupt();</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„</strong></p>
<blockquote>
<p>æ‰“æ–­æ­£å¸¸çš„çº¿ç¨‹ï¼Œæ­¤æ—¶åªä¼šä¿®æ”¹isInterruptedè¿™ä¸ªé™æ€å˜é‡çš„å€¼ä¸ºtrueï¼Œå¹¶ä¸ä¼šæŠ¥é”™ï¼Œåªæœ‰æ‰“æ–­sleep,join,yeildæ‰ä¼šæŠ¥é”™ï¼Œå¹¶ä¸”éƒ½ä¸ä¼šé€€å‡ºï¼Œè€Œæ˜¯ç»§ç»­è¿è¡Œã€‚<br>æ‰“æ–­sleep.join,yeildä¼šæ¸…é™¤æ‰“æ–­æ ‡è®°ï¼Œç½®ä¸ºfalseï¼Œæ­¤æ—¶å¦‚æœæœ‰å…¶ä»–éœ€è¦ï¼Œéœ€è¦å†æ¬¡æ‰“æ–­ï¼Œè°ƒç”¨interruptæ‰‹åŠ¨è®¾ç½®ä¸ºtrue</p>
</blockquote>
<p><strong>ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼</strong><br>Two Phase Termination<br>åœ¨ä¸€ä¸ªçº¿ç¨‹ T1ä¸­å¦‚ä½•â€œä¼˜é›…â€ç»ˆæ­¢çº¿ç¨‹ T2ï¼Ÿè¿™é‡Œçš„ã€ä¼˜é›…ã€‘æŒ‡çš„æ˜¯ç»™ T2ä¸€ä¸ªæ–™ç†åäº‹çš„æœºä¼šã€‚</p>
<blockquote>
<p>é”™è¯¯æ€è·¯</p>
<ol>
<li>ä½¿ç”¨çº¿ç¨‹å¯¹è±¡çš„stopæ–¹æ³•åœæ­¢çº¿ç¨‹<br>stop æ–¹æ³•ä¼šçœŸæ­£æ€æ­»çº¿ç¨‹ï¼Œå¦‚æœè¿™æ—¶çº¿ç¨‹é”ä½äº†å…±äº«èµ„æºï¼Œé‚£ä¹ˆå½“å®ƒè¢«æ€æ­»åå°±å†ä¹Ÿæ²¡æœ‰æœºä¼šé‡Šæ”¾é”ï¼Œå…¶å®ƒçº¿ç¨‹å°†æ°¸è¿œæ— æ³•è·å–é”<br>stopå·²ç»è¢«åºŸå¼ƒäº†</li>
<li>ä½¿ç”¨ System.exit(int) æ–¹æ³•åœæ­¢çº¿ç¨‹<br>ç›®çš„ä»…æ˜¯åœæ­¢ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†è¿™ç§åšæ³•ä¼šè®©æ•´ä¸ªç¨‹åºéƒ½åœæ­¢</li>
</ol>
</blockquote>
<p><strong>æµç¨‹å›¾</strong></p>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-08_17.41.29.png" width="60%" loading="lazy">

<p><strong>ä»£ç </strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">public class day01 &#123;</span><br><span class="line">    public static void main(String[] args) throws InterruptedException &#123;</span><br><span class="line">        TwoPhaseTermination twoPhaseTermination = new TwoPhaseTermination();</span><br><span class="line">        twoPhaseTermination.start();</span><br><span class="line">        Thread.sleep(3500);</span><br><span class="line">        twoPhaseTermination.stop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class TwoPhaseTermination &#123;</span><br><span class="line">    private Thread monitor;</span><br><span class="line"></span><br><span class="line">    void start() &#123;</span><br><span class="line">        monitor = new Thread(() -&gt; &#123;</span><br><span class="line">            while (true) &#123;</span><br><span class="line">                Thread thread = Thread.currentThread();</span><br><span class="line">                if (thread.isInterrupted()) &#123;//åˆ¤æ–­æ‰“æ–­æ ‡è®°ï¼Œä¸ºtrueæ—¶è¿›å…¥</span><br><span class="line">                    System.out.println(&quot;å–„åå·¥ä½œ...&quot;);</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">                try &#123;</span><br><span class="line">                    System.out.println(&quot;æ‰§è¡Œç›‘æ§...&quot;);</span><br><span class="line">                    Thread.sleep(1000);//ç¡çœ å·²é˜²æ­¢CPU100%</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    thread.interrupt();//å› ä¸ºsleepä¸­è¢«æ‰“æ–­äº†ï¼Œé‡ç½®äº†æ‰“æ–­æ ‡è®°ï¼Œéœ€è¦é‡æ–°æ‰“æ–­è®¾ç½®ä¸ºture</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        monitor.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void stop()&#123;</span><br><span class="line">        monitor.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">æ‰§è¡Œç›‘æ§...</span><br><span class="line">æ‰§è¡Œç›‘æ§...</span><br><span class="line">æ‰§è¡Œç›‘æ§...</span><br><span class="line">æ‰§è¡Œç›‘æ§...</span><br><span class="line">å–„åå·¥ä½œ...</span><br><span class="line">java.lang.InterruptedException: sleep interrupted</span><br><span class="line">	at java.lang.Thread.sleep(Native Method)</span><br><span class="line">	at TwoPhaseTermination.lambda$start$0(day01.java:27)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br></pre></td></tr></table></figure>

<h3 id="parkæ‰“æ–­"><a href="#parkæ‰“æ–­" class="headerlink" title="parkæ‰“æ–­"></a>parkæ‰“æ–­</h3><blockquote>
<ol>
<li>parkæ˜¯locksupportçš„ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºæ‰“æ–­å½“å‰çº¿ç¨‹</li>
<li>è°ƒç”¨åä»£ç ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œä¸å¾€åæ‰§è¡Œ,ä¸æ”¹å˜isInterrupted</li>
<li>å½“isInterruptedä¸ºtrueæ—¶,parkå¤±æ•ˆ</li>
</ol>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class Day02 &#123;</span><br><span class="line">    public static void main(String[] args) throws InterruptedException &#123;</span><br><span class="line"></span><br><span class="line">        Thread thread  = new Thread(()-&gt;&#123;</span><br><span class="line">            System.out.println(&quot;æ‰“æ–­å‰...&quot;);</span><br><span class="line">            LockSupport.park();</span><br><span class="line">            System.out.println(&quot;æ‰“æ–­å...&quot;);</span><br><span class="line">        &#125;);</span><br><span class="line">        thread.start();</span><br><span class="line">        Thread.sleep(1000);</span><br><span class="line">        thread.interrupt();//1ç§’åæ‰“æ–­ï¼Œè®¾ç½®ä¸ºtrueï¼Œparkè¢«æ‰“æ–­ï¼Œä»£ç ç»§ç»­è¿è¡Œ</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ‰“æ–­å‰...</span><br><span class="line">æ‰“æ–­å...</span><br></pre></td></tr></table></figure>

<h3 id="è¿‡æ—¶æ–¹æ³•"><a href="#è¿‡æ—¶æ–¹æ³•" class="headerlink" title="è¿‡æ—¶æ–¹æ³•"></a>è¿‡æ—¶æ–¹æ³•</h3><table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>static</th>
<th>åŠŸèƒ½è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>stop()</td>
<td></td>
<td>åœæ­¢çº¿ç¨‹è¿è¡Œ</td>
</tr>
<tr>
<td>suspend()</td>
<td></td>
<td>æŒ‚èµ·ï¼ˆæš‚åœï¼‰çº¿ç¨‹è¿è¡Œ</td>
</tr>
<tr>
<td>resume()</td>
<td></td>
<td>æ¢å¤çº¿ç¨‹è¿è¡Œ</td>
</tr>
</tbody></table>
<blockquote>
<p>è¿™äº›æ–¹æ³•å·²è¿‡æ—¶ï¼Œå®¹æ˜“ç ´ååŒæ­¥ä»£ç å—ï¼Œé€ æˆçº¿ç¨‹æ­»é”</p>
</blockquote>
<h3 id="Daemonå®ˆæŠ¤çº¿ç¨‹"><a href="#Daemonå®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="Daemonå®ˆæŠ¤çº¿ç¨‹"></a>Daemonå®ˆæŠ¤çº¿ç¨‹</h3><p><strong>javaæ‰€æœ‰çº¿ç¨‹ç»“æŸè¿è¡Œï¼Œç¨‹åºæ‰ä¼šç»“æŸè¿è¡Œï¼Œå³ä½¿ä¸»çº¿ç¨‹ç»“æŸäº†ï¼Œè¿˜æœ‰çº¿ç¨‹åœ¨å¾ªç¯æ‰§è¡Œï¼Œé‚£ä¹ˆç¨‹åºä¸é€€å‡º<br>æœ‰ä¸€ç§ç‰¹æ®Šçš„çº¿ç¨‹å«åšå®ˆæŠ¤çº¿ç¨‹ï¼Œåªè¦å…¶å®ƒéå®ˆæŠ¤çº¿ç¨‹è¿è¡Œç»“æŸäº†ï¼Œå³ä½¿å®ˆæŠ¤çº¿ç¨‹çš„ä»£ç æ²¡æœ‰æ‰§è¡Œå®Œï¼Œä¹Ÿä¼šå¼ºåˆ¶ç»“æŸã€‚</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Thread thread = new Thread(() -&gt; &#123;</span><br><span class="line">    while (true) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(500);</span><br><span class="line">            System.out.println(&quot;å­çº¿ç¨‹æŒç»­è¿è¡Œä¸­...&quot;);</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">thread.setDaemon(true);//è®¾ç½®å­çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹</span><br><span class="line">thread.start();</span><br><span class="line">Thread.sleep(1000);</span><br><span class="line">System.out.println(&quot;ä¸»çº¿ç¨‹ç»“æŸè¿è¡Œ...&quot;);</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å­çº¿ç¨‹æŒç»­è¿è¡Œä¸­...</span><br><span class="line">ä¸»çº¿ç¨‹ç»“æŸè¿è¡Œ...</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„<br>åƒåœ¾å›æ”¶å™¨çº¿ç¨‹å°±æ˜¯ä¸€ç§å®ˆæŠ¤çº¿ç¨‹<br>Tomcat ä¸­çš„Acceptor å’Œ Poller çº¿ç¨‹éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œæ‰€ä»¥ Tomcat æ¥æ”¶åˆ° shutdown å‘½ä»¤åï¼Œä¸ä¼šç­‰å¾…å®ƒä»¬å¤„ç†å®Œå½“å‰è¯·æ±‚</p>
</blockquote>
<h2 id="çº¿ç¨‹çŠ¶æ€"><a href="#çº¿ç¨‹çŠ¶æ€" class="headerlink" title="çº¿ç¨‹çŠ¶æ€"></a>çº¿ç¨‹çŠ¶æ€</h2><h3 id="äº”ç§çŠ¶æ€"><a href="#äº”ç§çŠ¶æ€" class="headerlink" title="äº”ç§çŠ¶æ€"></a>äº”ç§çŠ¶æ€</h3><img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_10.06.22.png" width="60%" loading="lazy">

<blockquote>
<p>ã€åˆå§‹çŠ¶æ€ã€‘ä»…æ˜¯åœ¨è¯­è¨€å±‚é¢åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡ï¼Œè¿˜æœªä¸æ“ä½œç³»ç»Ÿçº¿ç¨‹å…³è”<br>ã€å¯è¿è¡ŒçŠ¶æ€ã€‘ï¼ˆå°±ç»ªçŠ¶æ€ï¼‰æŒ‡è¯¥çº¿ç¨‹å·²ç»è¢«åˆ›å»ºï¼ˆä¸æ“ä½œç³»ç»Ÿçº¿ç¨‹å…³è”ï¼‰ï¼Œå¯ä»¥ç”± CPU è°ƒåº¦æ‰§è¡Œ<br>ã€è¿è¡ŒçŠ¶æ€ã€‘æŒ‡è·å–äº† CPU æ—¶é—´ç‰‡è¿è¡Œä¸­çš„çŠ¶æ€å½“CPU æ—¶é—´ç‰‡ç”¨å®Œï¼Œä¼šä»ã€è¿è¡ŒçŠ¶æ€ã€‘è½¬æ¢è‡³ã€å¯è¿è¡ŒçŠ¶æ€ã€‘ï¼Œä¼šå¯¼è‡´çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢<br>ã€é˜»å¡çŠ¶æ€ã€‘</p>
<ul>
<li>å¦‚æœè°ƒç”¨äº†é˜³å¡APIï¼Œå¦‚ BIO è¯»å†™æ–‡ä»¶ï¼Œè¿™æ—¶è¯¥çº¿ç¨‹å®é™…ä¸ä¼šç”¨åˆ°CPUï¼Œä¼šå¯¼è‡´çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿›å…¥ã€é˜»å¡çŠ¶æ€ã€‘</li>
<li>ç­‰BTO æ“ä½œå®Œæ¯•ï¼Œä¼šç”±æ“ä½œç³»ç»Ÿå”¤é†’é˜»å¡çš„çº¿ç¨‹ï¼Œè½¬æ¢è‡³ã€å¯è¿è¡ŒçŠ¶æ€ã€‘</li>
<li>ä¸ã€å¯è¿è¡ŒçŠ¶æ€ã€‘çš„åŒºåˆ«æ˜¯ï¼Œå¯¹ã€é˜»å¡çŠ¶æ€ã€‘çš„çº¿ç¨‹æ¥è¯´åªè¦å®ƒä»¬ä¸€ç›´ä¸å”¤é†’ï¼Œè°ƒåº¦å™¨å°±ä¸€ç›´ä¸ä¼šè€ƒè™‘è°ƒåº¦å®ƒä»¬</li>
</ul>
<p>ã€ç»ˆæ­¢çŠ¶æ€ã€‘è¡¨ç¤ºçº¿ç¨‹å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œç”Ÿå‘½å‘¨æœŸå·²ç»ç»“æŸï¼Œä¸ä¼šå†è½¬æ¢ä¸ºå…¶å®ƒçŠ¶æ€</p>
</blockquote>
<h3 id="å…­ç§çŠ¶æ€"><a href="#å…­ç§çŠ¶æ€" class="headerlink" title="å…­ç§çŠ¶æ€"></a>å…­ç§çŠ¶æ€</h3><img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2Fpic1.png" width="60%" loading="lazy">

<blockquote>
<ul>
<li>æ–°å»ºï¼šæ²¡æœ‰å’Œæ“ä½œç³»ç»Ÿçš„çº¿ç¨‹å…³è”ï¼Œåªæ˜¯åˆ›å»ºäº†javaå¯¹è±¡</li>
<li>ç»ˆç»“ï¼šä»£ç æ‰§è¡Œå®Œå°±è¿›å…¥ç»ˆç»“äº†ï¼Œä¸å¯é€†</li>
<li>å¯è¿è¡Œï¼šåŒ…å«äº†æ“ä½œç³»ç»Ÿå±‚é¢çš„å¯è¿è¡Œï¼Œè¿è¡Œï¼Œé˜»å¡(ç”±äºBOIåœ¨javaä¸­æ— æ³•åŒºåˆ†)ä¸‰ç§çŠ¶æ€</li>
<li>é˜»å¡ï¼šå½“å¯è¿è¡ŒçŠ¶æ€è·å–é”å¤±è´¥æ—¶ï¼Œè¿›å…¥è¯¥çŠ¶æ€ï¼Œå½“å…¶ä»–çº¿ç¨‹é‡Šæ”¾é”æ—¶ï¼Œé˜»å¡çŠ¶æ€è½¬ä¸ºå¯è¿è¡Œ</li>
<li>ç­‰å¾…ï¼šå½“å¯è¿è¡ŒçŠ¶æ€è·å¾—äº†é”ä½†æ˜¯è¿˜æœ‰ä¸€äº›èµ„æºæ²¡è·å–ï¼Œå¯ä»¥ä½¿ç”¨waitè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç”±å…¶å®ƒçº¿ç¨‹ä½¿ç”¨notifyæ¥å”¤é†’ç­‰å¾…,ä½¿ç”¨joinä¹Ÿå¯ä»¥è¿›å…¥ç­‰å¾…</li>
<li>æœ‰æ—¶é™ç­‰å¾…ï¼šå’Œç­‰å¾…ä¸€æ ·ï¼Œåˆ°æ—¶é—´ä¼šè‡ªåŠ¨å”¤é†’ï¼Œä¸”åœ¨å¯è¿è¡ŒçŠ¶æ€æ—¶ï¼Œåªè¦è°ƒç”¨sleepå°±å¯ä»¥è¿›å…¥è¯¥çŠ¶æ€</li>
</ul>
<p>æ³¨æ„ï¼š<br>é˜»å¡ï¼Œç­‰å¾…ï¼Œæœ‰æ—¶é™ç­‰å¾…éƒ½æ˜¯javaAPIå±‚é¢çš„ç»†åˆ†ï¼Œä¸å ç”¨æ—¶é—´ç‰‡</p>
</blockquote>
<h2 id="æœ¬ç« å°ç»“"><a href="#æœ¬ç« å°ç»“" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h2><blockquote>
<p><strong>æœ¬ç« çš„é‡ç‚¹åœ¨äºæŒæ¡</strong></p>
<p><strong>çº¿ç¨‹åˆ›å»º</strong><br><strong>çº¿ç¨‹é‡è¦api</strong>ï¼Œå¦‚ start, run, sleep, join, interrupt ç­‰<br><strong>çº¿ç¨‹çŠ¶æ€</strong><br><strong>åº”ç”¨æ–¹é¢</strong></p>
<ul>
<li>å¼‚æ­¥è°ƒç”¨ï¼šä¸»çº¿ç¨‹æ‰§è¡ŒæœŸé—´ï¼Œå…¶å®ƒçº¿ç¨‹å¼‚æ­¥æ‰§è¡Œè€—æ—¶æ“ä½œ</li>
<li>æé«˜æ•ˆç‡ï¼šå¹¶è¡Œè®¡ç®—ï¼Œç¼©çŸ­è¿ç®—æ—¶é—´</li>
<li>åŒæ­¥ç­‰å¾…ï¼šjoin</li>
<li>ç»Ÿç­¹è§„åˆ’ï¼šåˆç†ä½¿ç”¨çº¿ç¨‹ï¼Œå¾—åˆ°æœ€ä¼˜æ•ˆæœ I</li>
</ul>
<p><strong>åŸç†æ–¹é¢</strong></p>
<ul>
<li>çº¿ç¨‹è¿è¡Œæµç¨‹ï¼šæ ˆã€æ ˆå¸§ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€ç¨‹åºè®¡æ•°å™¨</li>
<li>Thread ä¸¤ç§åˆ›å»ºæ–¹å¼çš„æºç </li>
</ul>
<p><strong>æ¨¡å¼æ–¹é¢</strong></p>
<ul>
<li>ä¸¤é˜¶æ®µç»ˆæ­¢</li>
</ul>
</blockquote>
<h1 id="å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹"><a href="#å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹" class="headerlink" title="å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹"></a>å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹</h1><h2 id="å…±äº«é—®é¢˜"><a href="#å…±äº«é—®é¢˜" class="headerlink" title="å…±äº«é—®é¢˜"></a>å…±äº«é—®é¢˜</h2><h3 id="javaä»£ç çš„ä½“ç°"><a href="#javaä»£ç çš„ä½“ç°" class="headerlink" title="javaä»£ç çš„ä½“ç°"></a>javaä»£ç çš„ä½“ç°</h3><p>ä¸¤ä¸ªçº¿ç¨‹å¯¹åˆå§‹å€¼ä¸ºâ—çš„é™æ€å˜é‡ä¸€ä¸ªåšè‡ªå¢ï¼Œä¸€ä¸ªåšè‡ªå‡ï¼Œå„åš5000æ¬¡ï¼Œç»“æœæ˜¯0å—ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">static int s = 0;</span><br><span class="line">public static void main(String[] args) throws InterruptedException &#123;</span><br><span class="line">    Thread thread1 = new Thread(()-&gt;&#123;</span><br><span class="line">        for (int i = 0; i &lt; 5000; i++) &#123;</span><br><span class="line">            s++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    Thread thread2 = new Thread(()-&gt;&#123;</span><br><span class="line">        for (int i = 0; i &lt; 5000; i++) &#123;</span><br><span class="line">            s--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    thread1.start();</span><br><span class="line">    thread2.start();</span><br><span class="line">    thread1.join();</span><br><span class="line">    thread2.join();</span><br><span class="line">    System.out.println(&quot;s=&quot;+s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¾“å‡º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s=99</span><br></pre></td></tr></table></figure>

<h3 id="ä¸´ç•ŒåŒº-Critical-Seetion"><a href="#ä¸´ç•ŒåŒº-Critical-Seetion" class="headerlink" title="ä¸´ç•ŒåŒº Critical Seetion"></a>ä¸´ç•ŒåŒº Critical Seetion</h3><blockquote>
<p>ä¸€ä¸ªç¨‹åºè¿è¡Œå¤šä¸ªçº¿ç¨‹æœ¬èº«æ˜¯æ²¡æœ‰é—®é¢˜çš„<br>é—®é¢˜å‡ºåœ¨å¤šä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æº</p>
<ul>
<li>å¤šä¸ªçº¿ç¨‹è¯»å…±äº«èµ„æºå…¶å®ä¹Ÿæ²¡æœ‰é—®é¢˜</li>
<li>åœ¨å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¯»å†™æ“ä½œæ—¶å‘ç”ŸæŒ‡ä»¤äº¤é”™ï¼Œå°±ä¼šå‡ºç°é—®é¢˜<br>ä¸€æ®µä»£ç å—å†…å¦‚æœå­˜åœ¨å¯¹å…±äº«èµ„æºçš„å¤šçº¿ç¨‹è¯»å†™æ“ä½œï¼Œç§°è¿™æ®µä»£ç å—ä¸ºä¸´ç•ŒåŒº</li>
</ul>
</blockquote>
<p><strong>ä¾‹å¦‚ä¸‹é¢çš„ä»£ç </strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">static int counter = 0;</span><br><span class="line">static void increment()</span><br><span class="line">//ä¸´ç•ŒåŒº</span><br><span class="line">&#123;</span><br><span class="line">    counter++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static void decrement()</span><br><span class="line">//ä¸´ç•ŒåŒº</span><br><span class="line">&#123;</span><br><span class="line">    counter--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç«æ€æ¡ä»¶Race-Condition"><a href="#ç«æ€æ¡ä»¶Race-Condition" class="headerlink" title="ç«æ€æ¡ä»¶Race Condition"></a>ç«æ€æ¡ä»¶Race Condition</h3><blockquote>
<p>å¤šä¸ªçº¿ç¨‹åœ¨ä¸´ç•ŒåŒºå†…æ‰§è¡Œï¼Œç”±äºä»£ç çš„æ‰§è¡Œåºåˆ—ä¸åŒè€Œå¯¼è‡´ç»“æœæ— æ³•é¢„æµ‹ï¼Œç§°ä¹‹ä¸ºå‘ç”Ÿäº†ç«æ€æ¡ä»¶</p>
</blockquote>
<p><strong>å¦‚ä½•å¤„ç†å…±äº«é—®é¢˜</strong></p>
<blockquote>
<p>ä¸ºäº†é¿å…ä¸´ç•ŒåŒºçš„ç«æ€æ¡ä»¶å‘ç”Ÿï¼Œæœ‰å¤šç§æ‰‹æ®µå¯ä»¥è¾¾åˆ°ç›®çš„ã€‚</p>
<ul>
<li>é˜»å¡å¼çš„è§£å†³æ–¹æ¡ˆï¼šsynchronized, Lock</li>
<li>éé˜»å¡å¼çš„è§£å†³æ–¹æ¡ˆï¼šåŸå­å˜é‡</li>
</ul>
</blockquote>
<h2 id="synchronized"><a href="#synchronized" class="headerlink" title="synchronized"></a>synchronized</h2><blockquote>
<p>ä¿—ç§°ã€å¯¹è±¡é”ã€‘ï¼Œå®ƒé‡‡ç”¨äº’æ–¥çš„æ–¹å¼åŒä¸€æ—¶åˆ»è‡³å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æŒæœ‰ã€å¯¹è±¡é”ã€‘ï¼Œå…¶å®ƒçº¿ç¨‹å†æƒ³è·å–è¿™ä¸ªã€å¯¹è±¡é”ã€‘æ—¶å°±ä¼šé˜»å¡ä½ã€‚è¿™æ ·å°±èƒ½ä¿è¯æ‹¥æœ‰é”çš„çº¿ç¨‹å¯ä»¥å®‰å…¨çš„æ‰§è¡Œä¸´ç•ŒåŒºå†…çš„ä»£ç ï¼Œä¸ç”¨æ‹…å¿ƒçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢<br><strong>æ³¨æ„</strong><br>è™½ç„¶java ä¸­äº’æ–¥å’ŒåŒæ­¥éƒ½å¯ä»¥é‡‡ç”¨ synchronized å…³é”®å­—æ¥å®Œæˆï¼Œä½†å®ƒä»¬è¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼š</p>
<ul>
<li>äº’æ–¥æ˜¯ä¿è¯ä¸´ç•ŒåŒºçš„ç«æ€æ¡ä»¶å‘ç”Ÿï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸´ç•ŒåŒºä»£ç </li>
<li>åŒæ­¥æ˜¯ç”±äºçº¿ç¨‹æ‰§è¡Œçš„å…ˆåã€é¡ºåºä¸åŒã€éœ€è¦ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å…¶å®ƒçº¿ç¨‹è¿è¡Œåˆ°æŸä¸ªç‚¹</li>
</ul>
</blockquote>
<h2 id="çº¿ç¨‹å®‰å…¨åˆ†æ"><a href="#çº¿ç¨‹å®‰å…¨åˆ†æ" class="headerlink" title="çº¿ç¨‹å®‰å…¨åˆ†æ"></a>çº¿ç¨‹å®‰å…¨åˆ†æ</h2><h3 id="å˜é‡å®‰å…¨åˆ†æ"><a href="#å˜é‡å®‰å…¨åˆ†æ" class="headerlink" title="å˜é‡å®‰å…¨åˆ†æ"></a>å˜é‡å®‰å…¨åˆ†æ</h3><blockquote>
<p><strong>æˆå‘˜å˜é‡å’Œé™æ€å˜é‡æ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼Ÿ</strong><br>å¦‚æœå®ƒä»¬æ²¡æœ‰å…±äº«ï¼Œåˆ™çº¿ç¨‹å®‰å…¨<br>å¦‚æœå®ƒä»¬è¢«å…±äº«äº†ï¼Œæ ¹æ®å®ƒä»¬çš„çŠ¶æ€æ˜¯å¦èƒ½å¤Ÿæ”¹å˜ï¼Œåˆåˆ†ä¸¤ç§æƒ…å†µ</p>
<ul>
<li>å¦‚æœåªæœ‰è¯»æ“ä½œï¼Œåˆ™çº¿ç¨‹å®‰å…¨</li>
<li>å¦‚æœæœ‰è¯»å†™æ“ä½œï¼Œåˆ™è¿™æ®µä»£ç æ˜¯ä¸´ç•ŒåŒºï¼Œéœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨</li>
</ul>
<p><strong>å±€éƒ¨å˜é‡æ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼Ÿ</strong><br>å±€éƒ¨å˜é‡æ˜¯çº¿ç¨‹å®‰å…¨çš„<br>ä½†å±€éƒ¨å˜é‡å¼•ç”¨çš„å¯¹è±¡åˆ™æœªå¿…</p>
<ul>
<li>å¦‚æœè¯¥å¯¹è±¡æ²¡æœ‰é€ƒç¦»æ–¹æ³•çš„ä½œç”¨è®¿é—®ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„</li>
<li>å¦‚æœè¯¥å¯¹è±¡é€ƒç¦»æ–¹æ³•çš„ä½œç”¨èŒƒå›´ï¼Œéœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨</li>
</ul>
</blockquote>
<p><strong>å±€éƒ¨å˜é‡ä¸ºä»€ä¹ˆå®‰å…¨ï¼Ÿ</strong></p>
<blockquote>
<p>å±€éƒ¨å˜é‡åœ¨æ ˆå¸§ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æ ˆ</p>
</blockquote>
<p><strong>å±€éƒ¨å˜é‡å¼•ç”¨ä¸ºä»€ä¹ˆä¸å®‰å…¨ï¼Ÿ</strong><br><img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_14.00.14.png" width="60%" loading="lazy"></p>
<blockquote>
<p>å½“å±€éƒ¨å˜é‡å¼•ç”¨æš´éœ²ç»™å¤–é¢æ—¶ï¼Œå…¶æ ˆå¸§å­˜çš„æ˜¯åœ°å€ï¼ŒæŒ‡å‘å †å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡ä¹Ÿå¯èƒ½è¢«å…¶ä»–çº¿ç¨‹ä¸­å¼•ç”¨æ—¶ï¼Œä¸å®‰å…¨</p>
</blockquote>
<p><strong>é‡å†™çˆ¶ç±»ç ´åå®‰å…¨ï¼Ÿ</strong></p>
<blockquote>
<p>å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•å¯èƒ½ç ´åçº¿ç¨‹å®‰å…¨ï¼Œä½¿ç”¨privateå’Œfinalä¿®é¥°å¯ä»¥é¿å…</p>
</blockquote>
<h3 id="å¸¸è§çº¿ç¨‹å®‰å…¨ç±»"><a href="#å¸¸è§çº¿ç¨‹å®‰å…¨ç±»" class="headerlink" title="å¸¸è§çº¿ç¨‹å®‰å…¨ç±»"></a>å¸¸è§çº¿ç¨‹å®‰å…¨ç±»</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String          //å­—ç¬¦ä¸²</span><br><span class="line">Integer         //åŒ…è£…ç±»</span><br><span class="line">String Buffer   //å­—ç¬¦ä¸²æ‹¼æ¥</span><br><span class="line">Random          //éšæœºæ•°</span><br><span class="line">Vector          //listçš„å®‰å…¨å®ç°</span><br><span class="line">Hashtable       //mapçš„å®‰å…¨å®ç°</span><br><span class="line">java.util.concurrent åŒ…ä¸‹çš„ç±»</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¤šä¸ªçº¿ç¨‹è°ƒç”¨å®ƒä»¬åŒä¸€ä¸ªå®ä¾‹çš„æŸä¸ªæ–¹æ³•æ—¶ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚<br>å®ƒä»¬çš„æ¯ä¸ªæ–¹æ³•æ˜¯åŸå­çš„,ä½†æ³¨æ„å®ƒä»¬å¤šä¸ªæ–¹æ³•çš„ç»„åˆä¸æ˜¯åŸå­çš„</p>
</blockquote>
<p><strong>ä¸å¯å˜ç±»çš„çº¿ç¨‹å®‰å…¨æ€§</strong></p>
<blockquote>
<p>Stringã€Integer ç­‰éƒ½æ˜¯ä¸å¯å˜ç±»ï¼Œå› ä¸ºå…¶å†…éƒ¨çš„çŠ¶æ€ä¸å¯ä»¥æ”¹å˜ï¼Œå› æ­¤å®ƒä»¬çš„æ–¹æ³•éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„</p>
</blockquote>
<p><strong>Stringä¸ºä»€ä¹ˆç”¨finalä¿®é¥°ï¼Ÿ</strong></p>
<blockquote>
<p>å› ä¸ºä½¿ç”¨finalä¿®é¥°é˜²æ­¢å­ç±»é‡å†™ï¼Œç ´åçº¿ç¨‹å®‰å…¨æ€§</p>
</blockquote>
<h3 id="å®ä¾‹åˆ†æ"><a href="#å®ä¾‹åˆ†æ" class="headerlink" title="å®ä¾‹åˆ†æ"></a>å®ä¾‹åˆ†æ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Aspect</span><br><span class="line">@Component</span><br><span class="line">public class MyAspect &#123;</span><br><span class="line">    // æ˜¯å¦å®‰å…¨ï¼Ÿ</span><br><span class="line">    private long start;</span><br><span class="line">    @Before(&quot;execution(* *ï¼ˆ..ï¼‰)&quot;)</span><br><span class="line">    public void before()&#123;</span><br><span class="line">        start = System.nanoTime();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @After(&quot;execution(* *(..))&quot;)</span><br><span class="line">    public void after()&#123;</span><br><span class="line">        long end = System.nanoTime();</span><br><span class="line">        System.out.println(&quot;cost time:&quot;+(end-start));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»¥ä¸Šä»£ç ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœéœ€è¦å®ç°ï¼Œå¯ä»¥æ”¹ä¸ºç¯ç»•é€šçŸ¥ï¼Œå¹¶å°†startå’Œendä½œä¸ºå±€éƒ¨å˜é‡</p>
</blockquote>
<h2 id="Monitoræ¦‚å¿µ"><a href="#Monitoræ¦‚å¿µ" class="headerlink" title="Monitoræ¦‚å¿µ"></a>Monitoræ¦‚å¿µ</h2><h3 id="å¯¹è±¡å¤´"><a href="#å¯¹è±¡å¤´" class="headerlink" title="å¯¹è±¡å¤´"></a>å¯¹è±¡å¤´</h3><img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_14.41.57.png" width="70%" loading="lazy">
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_14.42.14.png" width="70%" loading="lazy">

<h3 id="Monitor"><a href="#Monitor" class="headerlink" title="Monitor"></a>Monitor</h3><p><strong>Monitor è¢«ç¿»è¯‘ä¸ºç›‘è§†å™¨æˆ–ç®¡ç¨‹</strong><br>æ¯ä¸ª Java å¯¹è±¡éƒ½å¯ä»¥å…³è”ä¸€ä¸ª Monitor å¯¹è±¡ï¼Œå¦‚æœä½¿ç”¨ synchronized ç»™å¯¹è±¡ä¸Šé”ï¼ˆé‡é‡çº§ï¼‰ä¹‹åï¼Œè¯¥å¯¹è±¡å¤´çš„ Mark Word ä¸­å°±è¢«è®¾ç½®æŒ‡å‘ Monitor å¯¹è±¡çš„æŒ‡é’ˆ<br>åŸæ¥çš„hashcodeåˆ†ä»£å¹´é¾„ç­‰ä¿¡æ¯éƒ½ä¼šå­˜åœ¨Monitorä¸­ï¼Œå½“è§£é”æ—¶é‡ç½®å›æ¥<br>Monitoræ˜¯æ“ä½œç³»ç»Ÿå±‚é¢çš„å¯¹è±¡ï¼Œcå®ç°çš„ï¼Œå¯¹javaä¸å¯è§<br><strong>Monitor ç»“æ„å¦‚ä¸‹</strong></p>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_14.54.28.png" width="70%" loading="lazy">


<blockquote>
<p>åˆšå¼€å§‹ Monitor ä¸­ Owner ä¸º null<br>å½“ Thread-2 æ‰§è¡Œ synchronized(obj) å°±ä¼šå°† Monitor çš„æ‰€æœ‰è€… Owner ç½®ä¸º Thread-2, Monitorä¸­åªèƒ½æœ‰ä¸€ä¸ªOwner<br>åœ¨ Thread-2 ä¸Šé”çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœ Thread-3, Thread-4, Thread,5 ä¹Ÿæ¥æ‰§è¡Œ synchronizedfobj)ï¼Œå°±ä¼šè¿›å…¥EntryList BLOCKEDçŠ¶æ€<br>Thread-2 æ‰§è¡Œå®ŒåŒæ­¥ä»£ç å—çš„å†…å®¹ï¼Œç„¶åå”¤é†’ EntryList ä¸­ç­‰å¾…çš„çº¿ç¨‹æ¥ç«äº‰é”ï¼Œç«äº‰çš„æ—¶æ˜¯éå…¬å¹³çš„<br>å›¾ä¸­ WaitSet ä¸­çš„ Thread-0, Thread-1 æ˜¯ä¹‹å‰è·å¾—è¿‡é”ï¼Œä½†æ¡ä»¶ä¸æ»¡è¶³è¿›å…¥WAITING çŠ¶æ€çš„çº¿ç¨‹ï¼Œåé¢è®² wait-notify æ—¶ä¼šåˆ†æ<br><strong>æ³¨æ„</strong></p>
<ul>
<li>synchronized å¿…é¡»æ˜¯è¿›å…¥åŒä¸€ä¸ªå¯¹è±¡çš„ monitor æ‰æœ‰ä¸Šè¿°çš„æ•ˆæœ</li>
<li>ä¸åŠ  synchronized çš„å¯¹è±¡ä¸ä¼šå…³è”ç›‘è§†å™¨ï¼Œä¸éµä»ä»¥ä¸Šè§„åˆ™</li>
</ul>
</blockquote>
<p><strong>ä»å­—èŠ‚ç è§’åº¦åˆ†æSynchronized</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Code:</span><br><span class="line">  stack=2, locals=3, args_size=1</span><br><span class="line">     0: getstatic     #2                  // Field lock:Ljava/lang/Object;</span><br><span class="line">     3: dup</span><br><span class="line">     4: astore_1</span><br><span class="line">     5: monitorenter</span><br><span class="line">     6: getstatic     #3                  // Field counter:I</span><br><span class="line">     9: iconst_1</span><br><span class="line">    10: iadd</span><br><span class="line">    11: putstatic     #3                  // Field counter:I</span><br><span class="line">    14: aload_1</span><br><span class="line">    15: monitorexit</span><br><span class="line">    16: goto          24</span><br><span class="line">    19: astore_2</span><br><span class="line">    20: aload_1</span><br><span class="line">    21: monitorexit</span><br><span class="line">    22: aload_2</span><br><span class="line">    23: athrow</span><br><span class="line">    24: return</span><br><span class="line">  Exception table:</span><br><span class="line">     from    to  target type</span><br><span class="line">         6    16    19   any</span><br><span class="line">        19    22    19   any</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è§£é‡Š</p>
<blockquote>
<p>0-4    è·å–é”å¯¹è±¡<br>5      è°ƒç”¨cå®ç°çš„monitorenteræ–¹æ³•ï¼Œå°†å¯¹è±¡çš„markwordä¿®æ”¹ä¸ºmonitorenterçš„åœ°å€ï¼Œå¹¶å­˜åŸå…ˆçš„markwordä¿¡æ¯åˆ°monitorenterä¸­<br>6-14   æ‰§è¡ŒåŒæ­¥ä»£ç å—ä¸­çš„å†…å®¹<br>15     è§£é”ï¼Œå°†markwordè¿˜åŸï¼Œå¹¶å°†ownerè®©å‡ºï¼Œå”¤é†’EntryList ä¸­ç­‰å¾…çš„çº¿ç¨‹æ¥ç«äº‰é”<br>19-23  å‡ºç°å¼‚å¸¸æ—¶å†æ¬¡æ‰§è¡Œè§£é”ï¼Œç¡®ä¿é”æˆåŠŸé‡Šæ”¾</p>
</blockquote>
<h3 id="é”ä¼˜åŒ–"><a href="#é”ä¼˜åŒ–" class="headerlink" title="é”ä¼˜åŒ–"></a>é”ä¼˜åŒ–</h3><h4 id="è½»é‡çº§é”"><a href="#è½»é‡çº§é”" class="headerlink" title="è½»é‡çº§é”"></a>è½»é‡çº§é”</h4><p>è½»é‡çº§é”çš„ä½¿ç”¨åœºæ™¯ï¼šå¦‚æœä¸€ä¸ªå¯¹è±¡è™½ç„¶æœ‰å¤šçº¿ç¨‹è®¿é—®ï¼Œä½†å¤šçº¿ç¨‹è®¿é—®çš„æ—¶é—´æ˜¯é”™å¼€çš„(ä¹Ÿå°±æ˜¯æ²¡æœ‰ç«äº‰)é‚£ä¹ˆå¯ä»¥ä½¿ç”¨è½»é‡çº§é”æ¥ä¼˜åŒ–ã€‚<br>è½»é‡çº§é”å¯¹ä½¿ç”¨è€…æ˜¯é€æ˜çš„ï¼Œå³è¯­æ³•ä»ç„¶æ˜¯ synchronizedï¼Œä¼šå…ˆå°è¯•è½»é‡çº§é”ï¼Œå¤±è´¥åå†é‡é‡çº§é”</p>
<p>æœ‰å¦‚ä¸‹ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">static final Object lock = new Object();</span><br><span class="line">public static void method1() &#123;</span><br><span class="line">    synchronized (lock) &#123;</span><br><span class="line">        //åŒæ­¥å—A</span><br><span class="line">        method2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private static void method2() &#123;</span><br><span class="line">    synchronized (lock) &#123;</span><br><span class="line">        //åŒæ­¥å—B</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è½»é‡é”çš„è¿‡ç¨‹</strong></p>
<p><strong>åˆ›å»ºé”è®°å½•(Lock Record)å¯¹è±¡ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½çš„æ ˆå¸§éƒ½ä¼šåŒ…å«ä¸€ä¸ªé”è®°å½•çš„ç»“æ„ï¼Œå†…éƒ¨å¯ä»¥å­˜å‚¨é”å®šå¯¹è±¡çš„ Mark Word</strong></p>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.07.13.png" width="50%" loading="lazy">

<p><strong>è®©é”è®°å½•ä¸­ Object reference æŒ‡å‘é”å¯¹è±¡ï¼Œå¹¶å°è¯•ç”¨ cas æ›¿æ¢ Object çš„ Mark Wordï¼Œå°† Mark Word çš„å€¼å­˜å…¥é”è®°å½•</strong></p>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.02.20.png" width="50%" loading="lazy">

<p><strong>å¦‚æœ cas æ›¿æ¢æˆåŠŸï¼Œå¯¹è±¡å¤´ä¸­å­˜å‚¨äº†é”è®°å½•åœ°å€å’ŒçŠ¶æ€ e8ï¼Œè¡¨ç¤ºç”±è¯¥çº¿ç¨‹ç»™å¯¹è±¡åŠ é”ï¼Œè¿™æ—¶å›¾ç¤ºå¦‚ä¸‹</strong></p>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.10.25.png" width="50%" loading="lazy">

<p><strong>å¦‚æœ cas å¤±è´¥ï¼Œæœ‰ä¸¤ç§æƒ…å†µ</strong></p>
<ul>
<li><strong>å¦‚æœæ˜¯å…¶å®ƒçº¿ç¨‹å·²ç»æŒæœ‰äº†è¯¥ Object çš„è½»é‡çº§é”ï¼Œè¿™æ—¶è¡¨æ˜æœ‰ç«äº‰ï¼Œè¿›å…¥é”è†¨èƒ€è¿‡ç¨‹ï¼Œåç»­è¯´æ˜</strong></li>
<li><strong>å¦‚æœæ˜¯è‡ªå·±æ‰§è¡Œäº† synchronized é”é‡å…¥ï¼Œé‚£ä¹ˆå†æ·»åŠ ä¸€æ¡ Lock Record ä½œä¸ºé‡å…¥çš„è®¡æ•°ï¼ŒåŸæœ¬è®°å½•çš„Hashcodeç­‰å˜ä¸ºnullï¼Œå¦‚ä¸‹</strong></li>
</ul>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.14.17.png" width="50%" loading="lazy">


<p><strong>å½“é€€å‡º synchronized ä»£ç å—ï¼ˆè§£é”æ—¶ï¼‰å¦‚æœæœ‰å–å€¼ä¸º null çš„é”è®°å½•ï¼Œè¡¨ç¤ºæœ‰é‡å…¥ï¼Œè¿™æ—¶é‡ç½®é”è®°å½•ï¼Œè¡¨ç¤ºé‡å…¥è®¡æ•°å‡ä¸€</strong></p>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.15.41.png" width="50%" loading="lazy">

<p><strong>å½“é€€å‡º synchronized ä»£ç å—ï¼ˆè§£é”æ—¶ï¼‰é”è®°å½•çš„å€¼ä¸ä¸º nullï¼Œè¿™æ—¶ä½¿ç”¨ cas å°† Mark Word çš„å€¼æ¢å¤ç»™å¯¹è±¡å¤´</strong></p>
<ul>
<li><strong>æˆåŠŸï¼Œåˆ™è§£é”æˆåŠŸ</strong></li>
<li><strong>å¤±è´¥ï¼Œè¯´æ˜è½»é‡çº§é”è¿›è¡Œäº†é”è†¨èƒ€æˆ–å·²ç»å‡çº§ä¸ºé‡é‡çº§é”ï¼Œè¿›å…¥é‡é‡çº§é”è§£é”æµç¨‹</strong></li>
</ul>
<h3 id="é”è†¨èƒ€"><a href="#é”è†¨èƒ€" class="headerlink" title="é”è†¨èƒ€"></a>é”è†¨èƒ€</h3><p><strong>å¦‚æœåœ¨å°è¯•åŠ è½»é‡çº§é”çš„è¿‡ç¨‹ä¸­ï¼ŒCASæ“ä½œæ— æ³•æˆåŠŸï¼Œè¿™æ—¶ä¸€ç§æƒ…å†µå°±æ˜¯æœ‰å…¶å®ƒçº¿ç¨‹ä¸ºæ­¤å¯¹è±¡åŠ ä¸Šäº†è½»é‡çº§é”ï¼ˆæœ‰ç«äº‰ï¼‰ï¼Œè¿™æ—¶éœ€è¦è¿›è¡Œé”è†¨èƒ€ï¼Œå°†è½»é‡çº§é”å˜ä¸ºé‡é‡çº§é”ã€‚</strong></p>
<p><strong>å½“ Thread-1 è¿›è¡Œè½»é‡çº§åŠ é”æ—¶ï¼ŒThread-0 å·²ç»å¯¹è¯¥å¯¹è±¡åŠ äº†è½»é‡çº§é”</strong><br><img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.21.07.png" width="65%" loading="lazy"></p>
<p><strong>è¿™æ—¶ Thread-1 åŠ è½»é‡çº§é”å¤±è´¥ï¼Œè¿›å…¥é”è†¨èƒ€æµç¨‹</strong></p>
<ul>
<li><strong>Object å¯¹è±¡ç”³è¯· Monitor é”ï¼Œè®©MarkwordæŒ‡å‘é‡é‡çº§é”åœ°å€ï¼Œå¹¶ä¸”æ ‡è¯†ä½å˜ä¸º10</strong></li>
<li><strong>ç„¶åè‡ªå·±è¿›å…¥Monitor çš„ EntryList BLOCKED</strong></li>
</ul>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.24.58.png" width="65%" loading="lazy">

<p><strong>å½“ Thread-0 é€€å‡ºåŒæ­¥å—è§£é”æ—¶ï¼Œä½¿ç”¨ cas å°† Mark Word çš„å€¼æ¢å¤ç»™å¯¹è±¡å¤´ï¼Œå¤±è´¥ã€‚è¿™æ—¶ä¼šè¿›å…¥é‡é‡çº§è§£é”æµç¨‹</strong><br><strong>å³æŒ‰ç…§ Monitor åœ°å€æ‰¾åˆ° Monitor å¯¹è±¡ï¼Œè®¾ç½® Owner ä¸º nulï¼Œå”¤é†’ EntryList ä¸­ BLOCKED çº¿ç¨‹</strong></p>
<h3 id="è‡ªæ—‹ä¼˜åŒ–"><a href="#è‡ªæ—‹ä¼˜åŒ–" class="headerlink" title="è‡ªæ—‹ä¼˜åŒ–"></a>è‡ªæ—‹ä¼˜åŒ–</h3><p><strong>é‡é‡çº§é”ç«äº‰çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥ä½¿ç”¨è‡ªæ—‹æ¥è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚æœå½“å‰çº¿ç¨‹è‡ªæ—‹æˆåŠŸï¼ˆå³è¿™æ—¶å€™æŒé”çº¿ç¨‹å·²ç»é€€å‡ºäº†åŒæ­¥å—ï¼Œé‡Šæ”¾äº†é”)ï¼Œè¿™æ—¶å½“å‰çº¿ç¨‹å°±å¯ä»¥é¿å…é˜»å¡ã€‚</strong></p>
<p><strong>è‡ªæ—‹æˆåŠŸæƒ…å†µï¼Œé‡è¯•å°è¯•æˆåŠŸè·å–é”</strong></p>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.29.43.png" width="55%" loading="lazy">

<p><strong>è‡ªæ—‹å¤±è´¥æƒ…å†µï¼Œåªèƒ½é˜»å¡</strong></p>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_16.28.11.png" width="55%" loading="lazy">

<blockquote>
<p><strong>æ³¨æ„</strong></p>
<ul>
<li>åœ¨Java 6 ä¹‹åè‡ªæ—‹é”æ˜¯è‡ªé€‚åº”çš„ï¼Œæ¯”å¦‚å¯¹è±¡åˆšåˆšçš„ä¸€æ¬¡è‡ªæ—‹æ“ä½œæˆåŠŸè¿‡ï¼Œé‚£ä¹ˆè®¤ä¸ºè¿™æ¬¡è‡ªæ—‹æˆåŠŸçš„å¯èƒ½æ€§ä¼šé«˜ï¼Œå°±å¤šè‡ªæ—‹å‡ æ¬¡ï¼›åä¹‹ï¼Œå°±å°‘è‡ªæ—‹ç”šè‡³ä¸è‡ªæ—‹ï¼Œæ€»ä¹‹ï¼Œæ¯”è¾ƒæ™ºèƒ½ã€‚</li>
<li>è‡ªæ—‹ä¼šå ç”¨ CPU æ—¶é—´ï¼Œå•æ ¸ CPU è‡ªæ—‹å°±æ˜¯æµªè´¹ï¼Œå¤šæ ¸ CPU è‡ªæ—‹æ‰èƒ½å‘æŒ¥ä¼˜åŠ¿ã€‚</li>
<li>Java 7 ä¹‹åä¸èƒ½æ§åˆ¶æ˜¯å¦å¼€å¯è‡ªæ—‹åŠŸèƒ½</li>
</ul>
</blockquote>
<h3 id="åå‘é”"><a href="#åå‘é”" class="headerlink" title="åå‘é”"></a>åå‘é”</h3><p><strong>è½»é‡çº§é”åœ¨æ²¡æœ‰ç«äº‰æ—¶ï¼ˆå°±è‡ªå·±è¿™ä¸ªçº¿ç¨‹ï¼‰ï¼Œæ¯æ¬¡é‡å…¥ä»ç„¶éœ€è¦æ‰§è¡Œ CAS æ“ä½œã€‚</strong><br><strong>Java 6 ä¸­å¼•å…¥äº†åå‘é”æ¥åšè¿›ä¸€æ­¥ä¼˜åŒ–ï¼šåªæœ‰ç¬¬ä¸€æ¬¡ä½¿ç”¨ CAS å°†çº¿ç¨‹ I è®¾ç½®åˆ°å¯¹è±¡çš„ Mark Word å¤´ï¼Œä¹‹åå‘ç°è¿™ä¸ªçº¿ç¨‹ 1D æ˜¯è‡ªå·±çš„å°±è¡¨ç¤ºæ²¡æœ‰ç«äº‰ï¼Œä¸ç”¨é‡æ–° CASã€‚ä»¥ååªè¦ä¸å‘ç”Ÿç«äº‰ï¼Œè¿™ä¸ªå¯¹è±¡å°±å½’è¯¥çº¿ç¨‹æ‰€æœ‰</strong></p>
<blockquote>
<p>ä¸€ä¸ªå¯¹è±¡åˆ›å»ºæ—¶ï¼š</p>
<ul>
<li>å¦‚æœå¼€å¯äº†åå‘é”ï¼ˆé»˜è®¤å¼€å¯)ï¼Œé‚£ä¹ˆå¯¹è±¡åˆ›å»ºåï¼Œmarkword å€¼ä¸º 0x05 å³æœ€å3ä½ä¸º101ï¼Œè¿™æ—¶å®ƒçš„threadã€ epochã€ age éƒ½ä¸º0</li>
<li>åå‘é”æ˜¯é»˜è®¤æ˜¯å»¶è¿Ÿçš„ï¼Œä¸ä¼šåœ¨ç¨‹åºå¯åŠ¨æ—¶ç«‹å³ç”Ÿæ•ˆï¼Œå¦‚æœæƒ³é¿å…å»¶è¿Ÿï¼Œå¯ä»¥åŠ  VM å‚æ•°</li>
</ul>
<p> <strong>xx:BiasedLockingStartupDelay=e æ¥ç¦ç”¨å»¶è¿Ÿ</strong></p>
<ul>
<li>å¦‚æœæ²¡æœ‰å¼€å¯åå‘é”ï¼Œé‚£ä¹ˆå¯¹è±¡åˆ›å»ºåï¼Œmarkword å€¼ä¸º Ox01 å³æœ€å3ä½ä¸º 001ï¼Œè¿™æ—¶å®ƒçš„ hashcode. ageéƒ½ä¸º0ï¼Œç¬¬ä¸€æ¬¡ç”¨åˆ° hashcode æ—¶æ‰ä¼šèµ‹å€¼</li>
</ul>
</blockquote>
<p><strong>ç¦ç”¨åå‘é”</strong></p>
<blockquote>
<p>-XXï¼š-UseBiasedLocking ç¦ç”¨åå‘é”</p>
</blockquote>
<p><strong>è°ƒç”¨hashCodeå–æ¶ˆåå‘é”</strong></p>
<blockquote>
<p>åŸå› ï¼šå› ä¸ºåå‘é”é‡Œå­˜çš„æ˜¯æ“ä½œç³»ç»Ÿå±‚é¢çš„çº¿ç¨‹id(51ä½)ï¼Œæ²¡æœ‰åœ°æ–¹å­˜hashcode,æ‰€ä»¥ç”¨åˆ°hashcodeæ—¶ä¼šæ’¤é”€åå‘é”</p>
</blockquote>
<p><strong>å…¶ä»–çº¿ç¨‹è·å–é”å–æ¶ˆåå‘é”</strong></p>
<blockquote>
<p>è¿™æ—¶åå‘çŠ¶æ€é‡æ–°å˜ä¸º0ï¼Œåå‘é”å˜ä¸ºè½»é‡çº§é”</p>
</blockquote>
<p><strong>è°ƒç”¨wait/notifyå–æ¶ˆåå‘é”</strong></p>
<blockquote>
<p>å› ä¸ºç­‰å¾…å”¤é†’æœºåˆ¶åªæœ‰é‡é‡é”æœ‰</p>
</blockquote>
<p><strong>æ‰¹é‡é‡åå‘</strong></p>
<blockquote>
<p>å¦‚æœå¯¹è±¡è™½ç„¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ï¼Œä½†æ²¡æœ‰ç«äº‰ï¼Œè¿™æ—¶åå‘äº†çº¿ç¨‹T1çš„å¯¹è±¡ä»æœ‰æœºä¼šé‡æ–°åå‘T2ï¼Œé‡åå‘ä¼šé‡ç½®å¯¹è±¡çš„ Thread ID<br>å½“æ’¤é”€åå‘é”é˜ˆå€¼è¶…è¿‡20 æ¬¡åï¼Œjvm ä¼šè¿™æ ·è§‰å¾—ï¼Œæˆ‘æ˜¯ä¸æ˜¯åå‘é”™äº†å‘¢ï¼Œäºæ˜¯ä¼šåœ¨ç»™è¿™äº›å¯¹è±¡åŠ é”æ—¶é‡æ–°åå‘è‡³åŠ é”çº¿ç¨‹</p>
</blockquote>
<p><strong>æ‰¹é‡æ’¤é”€</strong></p>
<blockquote>
<p>å½“æ’’é”€åå‘é”é˜ˆå€¼è¶…è¿‡ 40 æ¬¡åï¼Œjvm ä¼šè¿™æ ·è§‰å¾—ï¼Œè‡ªå·±ç¡®å®åå‘é”™äº†ï¼Œæ ¹æœ¬å°±ä¸è¯¥åå‘ã€‚äºæ˜¯æ•´ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡éƒ½ä¼šå˜ä¸ºä¸å¯åå‘çš„ï¼Œæ–°å»ºçš„å¯¹è±¡ä¹Ÿæ˜¯ä¸å¯åå‘çš„</p>
</blockquote>
<h3 id="é”æ¶ˆé™¤"><a href="#é”æ¶ˆé™¤" class="headerlink" title="é”æ¶ˆé™¤"></a>é”æ¶ˆé™¤</h3><blockquote>
<p>-XX:-EliminateLocks<br>JITå³æ—¶ç¼–è¯‘å™¨ä¼šåˆ†æä»£ç ï¼Œå¦‚æœæ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡æ²¡æœ‰é€ƒé€¸ï¼Œé‚£ä¹ˆå¯¹å®ƒåŠ é”æ²¡æœ‰æ„ä¹‰ï¼Œä¸ä¼šåŠ ä»»ä½•é”ã€‚</p>
</blockquote>
<h2 id="wait-notify"><a href="#wait-notify" class="headerlink" title="wait/notify"></a>wait/notify</h2><h3 id="åŸç†ä¹‹wait-notify"><a href="#åŸç†ä¹‹wait-notify" class="headerlink" title="åŸç†ä¹‹wait/notify"></a>åŸç†ä¹‹wait/notify</h3><img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-09_14.54.28.png" width="70%" loading="lazy">

<blockquote>
<p>Ownerçº¿ç¨‹è·å¾—é”ä½†å‘ç°æ¡ä»¶ä¸æ»¡è¶³ï¼Œè°ƒç”¨ wait æ–¹æ³•ï¼Œå³å¯è¿›å…¥ WaitSet å˜ä¸º WAITING çŠ¶æ€<br>BLOCKED å’Œ WAITING çš„çº¿ç¨‹éƒ½å¤„äºé˜»å¡çŠ¶æ€ï¼Œä¸å ç”¨ CPU æ—¶é—´ç‰‡<br>BLOCKED çº¿ç¨‹ä¼šåœ¨ Owner çº¿ç¨‹é‡Šæ”¾é”æ—¶å”¤é†’<br>WAITING çº¿ç¨‹ä¼šåœ¨ Owner çº¿ç¨‹è°ƒç”¨ notify æˆ– notifyAll æ—¶å”¤é†’ï¼Œä½†å”¤é†’åå¹¶ä¸æ„å‘³è€…ç«‹åˆ»è·å¾—é”ï¼Œä»éœ€è¿›å…¥EntryList é‡æ–°ç«äº‰</p>
</blockquote>
<h3 id="APIä»‹ç»"><a href="#APIä»‹ç»" class="headerlink" title="APIä»‹ç»"></a>APIä»‹ç»</h3><blockquote>
<ul>
<li>obj.wait(ï¼‰ è®©è¿›å…¥ object ç›‘è§†å™¨çš„çº¿ç¨‹åˆ° waitSet ç­‰å¾…</li>
<li>obj.notify() åœ¨ object ä¸Šæ­£åœ¨ waitSet ç­‰å¾…çš„çº¿ç¨‹ä¸­æŒ‘ä¸€ä¸ªå”¤é†’</li>
<li>obj.notifyA11() è®© object ä¸Šæ­£åœ¨ waitSet ç­‰å¾…çš„çº¿ç¨‹å…¨éƒ¨å”¤é†’</li>
</ul>
<p><strong>æ³¨æ„</strong><br>å®ƒä»¬éƒ½æ˜¯çº¿ç¨‹ä¹‹é—´è¿›è¡Œåä½œçš„æ‰‹æ®µï¼Œéƒ½å±äº Object å¯¹è±¡çš„æ–¹æ³•ã€‚å¿…é¡»è·å¾—æ­¤å¯¹è±¡çš„é”ï¼Œæ‰èƒ½è°ƒç”¨è¿™å‡ ä¸ªæ–¹æ³•</p>
</blockquote>
<p><strong>sleep( 1ong n) å’Œwait(1ong n) çš„åŒºåˆ«</strong></p>
<blockquote>
<ul>
<li>sleep æ˜¯ Thread æ–¹æ³•ï¼Œè€Œ wait æ˜¯ Object çš„æ–¹æ³•</li>
<li>sleep ä¸éœ€è¦å¼ºåˆ¶å’Œ synchronized é…åˆä½¿ç”¨ï¼Œä½† wait éœ€è¦å’Œ synchronized ä¸€èµ·ç”¨</li>
<li>sleep åœ¨ç¡çœ çš„åŒæ—¶ï¼Œä¸ä¼šé‡Šæ”¾å¯¹è±¡é”çš„ï¼Œä½† wait åœ¨ç­‰å¾…çš„æ—¶å€™ä¼šé‡Šæ”¾å¯¹è±¡é”ã€‚</li>
<li>å®ƒä»¬çŠ¶æ€éƒ½æ˜¯TIMED_WAITING</li>
</ul>
</blockquote>
<h3 id="wait-notifyæ­£ç¡®ä½¿ç”¨"><a href="#wait-notifyæ­£ç¡®ä½¿ç”¨" class="headerlink" title="wait/notifyæ­£ç¡®ä½¿ç”¨"></a>wait/notifyæ­£ç¡®ä½¿ç”¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">synchronized (lock) &#123;</span><br><span class="line">    while (æ¡ä»¶ä¸æˆç«‹) &#123;</span><br><span class="line">        lock.wait();</span><br><span class="line">    &#125;</span><br><span class="line">    å¹²æ´»</span><br><span class="line">&#125;</span><br><span class="line">//å¦ä¸€ä¸ªçº¿ç¨‹</span><br><span class="line">synchronized (lock) &#123;</span><br><span class="line">    lock.notifyAll();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åŒæ­¥æ¨¡å¼ä¹‹ä¿æŠ¤æ€§æš‚åœ"><a href="#åŒæ­¥æ¨¡å¼ä¹‹ä¿æŠ¤æ€§æš‚åœ" class="headerlink" title="åŒæ­¥æ¨¡å¼ä¹‹ä¿æŠ¤æ€§æš‚åœ"></a>åŒæ­¥æ¨¡å¼ä¹‹ä¿æŠ¤æ€§æš‚åœ</h3><p><strong>å³ Guarded Suspensionï¼Œç”¨åœ¨ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹çš„æ‰§è¡Œç»“æœ</strong></p>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-10_14.00.08.png" width="70%" loading="lazy">

<blockquote>
<p><strong>è¦ç‚¹</strong></p>
<ul>
<li>æœ‰ä¸€ä¸ªç»“æœéœ€è¦ä»ä¸€ä¸ªçº¿ç¨‹ä¼ é€’åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œè®©ä»–ä»¬å…³è”åŒä¸€ä¸ª GuardedObject</li>
<li>å¦‚æœæœ‰ç»“æœä¸æ–­ä»ä¸€ä¸ªçº¿ç¨‹åˆ°å¦ä¸€ä¸ªçº¿ç¨‹é‚£ä¹ˆå¯ä»¥ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆè§ç”Ÿäº§è€…/æ¶ˆè´¹è€…ï¼‰</li>
<li>JDK ä¸­ï¼Œjoin çš„å®ç°ã€Future çš„å®ç°ï¼Œé‡‡ç”¨çš„å°±æ˜¯æ­¤æ¨¡å¼</li>
<li>å› ä¸ºè¦ç­‰å¾…å¦ä¸€æ–¹çš„ç»“æœï¼Œå› æ­¤å½’ç±»åˆ°åŒæ­¥æ¨¡å¼</li>
</ul>
</blockquote>
<p><strong>è™šå‡å”¤é†’</strong></p>
<blockquote>
<p>å…¶ä»–çº¿ç¨‹é”™è¯¯çš„å”¤é†’äº†ä¸è¯¥å”¤é†’çš„çº¿ç¨‹(notifyæ˜¯éšæœºçš„,è€Œnotifyallæ˜¯æ‰€æœ‰äºº)</p>
</blockquote>
<p><strong>åŒæ­¥æ¨¡å¼ä¹‹ä¿æŠ¤æ€§æš‚åœä»£ç å®ç°</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">public class GuardedObject &#123;</span><br><span class="line"></span><br><span class="line">    private int id;</span><br><span class="line"></span><br><span class="line">    public GuardedObject(int id) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getId() &#123;</span><br><span class="line">        return id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //ç»“æœ</span><br><span class="line">    private Object response;</span><br><span class="line"></span><br><span class="line">    //è·å–ç»“æœ</span><br><span class="line">    public Object get() throws InterruptedException &#123;</span><br><span class="line">        synchronized (this) &#123;</span><br><span class="line">            while (response == null) &#123;</span><br><span class="line">                this.wait();</span><br><span class="line">            &#125;</span><br><span class="line">            return response;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //äº§ç”Ÿç»“æœ</span><br><span class="line">    public void complete(Object response) &#123;</span><br><span class="line">        synchronized (this) &#123;</span><br><span class="line">            this.response = response;</span><br><span class="line">            this.notifyAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //æ‰©å±•è¶…æ—¶ç­‰å¾…</span><br><span class="line">    public Object get(long timeout) throws InterruptedException &#123;</span><br><span class="line">        synchronized (this) &#123;</span><br><span class="line">            long begin = System.currentTimeMillis();//å¼€å§‹æ—¶é—´</span><br><span class="line">            long passTime = 0;//ç»å†çš„æ—¶é—´</span><br><span class="line">            while (response == null) &#123;</span><br><span class="line">                long waitTime = timeout - passTime;//è¿™ä¸€è½®åº”è¯¥è¦ç­‰å¾…çš„æ—¶é—´</span><br><span class="line">                if (waitTime &lt;= 0)//ä¸éœ€è¦ç­‰äº†</span><br><span class="line">                    break;</span><br><span class="line">                this.wait(waitTime);</span><br><span class="line">                passTime = System.currentTimeMillis() - begin;//æ±‚å¾—ç»å†çš„æ—¶é—´</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            return response;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MailBoxes &#123;</span><br><span class="line">    private static Map&lt;Integer, GuardedObject&gt; boxs = new Hashtable&lt;&gt;();</span><br><span class="line">    private static int id = 1;</span><br><span class="line"></span><br><span class="line">    private static synchronized int generateId() &#123;</span><br><span class="line">        return id++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static GuardedObject getGuardedObject(int id) &#123;</span><br><span class="line">        return boxs.remove(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static GuardedObject createGuardedObject()&#123;</span><br><span class="line">        GuardedObject go = new GuardedObject(generateId());</span><br><span class="line">        boxs.put(go.getId(),go);</span><br><span class="line">        return go;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static Set&lt;Integer&gt; getIds()&#123;</span><br><span class="line">        return boxs.keySet();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸Šè¿°ä»£ç å®ç°äº†è¶…æ—¶ç­‰å¾…ï¼Œå‘é€è€…å’Œæ¥æ”¶è€…çš„ç»“å¶ï¼Œå¤šä¸ªä»»åŠ¡çš„ç®¡ç†<br>å‘é€è€…å’Œæ¥æ”¶è€…ä¸€å¯¹ä¸€ä¸€ä¸€å¯¹åº”ï¼Œå¦‚æœæ˜¯å¤šæ¶ˆæ¯å‘é€ï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©æ¶ˆè´¹è€…ç”Ÿäº§è€…æ¨¡å¼</p>
</blockquote>
<h3 id="å¼‚æ­¥æ¨¡å¼ä¹‹ç”Ÿäº§è€…è´¹è€…"><a href="#å¼‚æ­¥æ¨¡å¼ä¹‹ç”Ÿäº§è€…è´¹è€…" class="headerlink" title="å¼‚æ­¥æ¨¡å¼ä¹‹ç”Ÿäº§è€…è´¹è€…"></a>å¼‚æ­¥æ¨¡å¼ä¹‹ç”Ÿäº§è€…è´¹è€…</h3><blockquote>
<p><strong>è¦ç‚¹</strong></p>
<ul>
<li>ä¸å‰é¢çš„ä¿æŠ¤æ€§æš‚åœä¸­çš„ GuardObject ä¸åŒï¼Œä¸éœ€è¦äº§ç”Ÿç»“æœå’Œæ¶ˆè´¹ç»“æœçš„çº¿ç¨‹â€”â€”å¯¹åº”</li>
<li>æ¶ˆè´¹é˜Ÿåˆ—å¯ä»¥ç”¨æ¥å¹³è¡¡ç”Ÿäº§å’Œæ¶ˆè´¹çš„çº¿ç¨‹èµ„æº</li>
<li>ç”Ÿäº§è€…ä»…è´Ÿè´£äº§ç”Ÿç»“æœæ•°æ®ï¼Œä¸å…³å¿ƒæ•°æ®è¯¥å¦‚ä½•å¤„ç†ï¼Œè€Œæ¶ˆè´¹è€…ä¸“å¿ƒå¤„ç†ç»“æœæ•°æ®</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—æ˜¯æœ‰å®¹é‡é™åˆ¶çš„ï¼Œæ»¡æ—¶ä¸ä¼šå†åŠ å…¥æ•°æ®ï¼Œç©ºæ—¶ä¸ä¼šå†æ¶ˆè€—æ•°æ®</li>
<li>JDK ä¸­å„ç§é˜»å¡é˜Ÿåˆ—ï¼Œé‡‡ç”¨çš„å°±æ˜¯è¿™ç§æ¨¡å¼</li>
</ul>
</blockquote>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-10_15.05.51.png " width="70%" loading="lazy">

<p><strong>ä»£ç å®ç°</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">final class Message &#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private Object message;</span><br><span class="line">    public Message(int id, Object message) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">        this.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">    public int getId() &#123;</span><br><span class="line">        return id;</span><br><span class="line">    &#125;</span><br><span class="line">    public Object getMessage() &#123;</span><br><span class="line">        return message;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Message&#123;&quot; +</span><br><span class="line">                &quot;id=&quot; + id +</span><br><span class="line">                &quot;, message=&quot; + message +</span><br><span class="line">                &#x27;&#125;&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//æ¶ˆæ¯é˜Ÿåˆ—ï¼Œçº¿ç¨‹é€šä¿¡</span><br><span class="line">class MessageQueue &#123;</span><br><span class="line">    private LinkedList&lt;Message&gt; list = new LinkedList&lt;&gt;();//åŒç«¯é“¾è¡¨</span><br><span class="line">    private int capcity = 0;//é˜Ÿåˆ—å®¹é‡</span><br><span class="line">    //åˆå§‹åŒ–å®¹é‡å¤§å°</span><br><span class="line">    public MessageQueue(int capcity) &#123;</span><br><span class="line">        this.capcity = capcity;</span><br><span class="line">    &#125;</span><br><span class="line">    //è·å–æ¶ˆæ¯</span><br><span class="line">    public Message take() throws InterruptedException &#123;</span><br><span class="line">        synchronized (list) &#123;</span><br><span class="line">            while (list.isEmpty()) &#123;</span><br><span class="line">                list.wait();</span><br><span class="line">            &#125;</span><br><span class="line">            Message message = list.removeFirst();</span><br><span class="line">            list.notifyAll();</span><br><span class="line">            return message;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //æ·»åŠ æ¶ˆæ¯</span><br><span class="line">    public void put(Message message) throws InterruptedException &#123;</span><br><span class="line">        synchronized (list) &#123;</span><br><span class="line">            while (list.size() &gt;= capcity) &#123;</span><br><span class="line">                list.wait();</span><br><span class="line">            &#125;</span><br><span class="line">            list.add(message);</span><br><span class="line">            list.notifyAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Park-amp-Unpark"><a href="#Park-amp-Unpark" class="headerlink" title="Park &amp; Unpark"></a>Park &amp; Unpark</h3><p><strong>ç‰¹ç‚¹</strong></p>
<blockquote>
<p><strong>ä¸Object çš„ wait &amp; notify ç›¸æ¯”</strong></p>
<ul>
<li>wait, notify å’Œ notifyAll å¿…é¡»é…åˆ Object Monitor ä¸€èµ·ä½¿ç”¨ï¼Œè€Œ park, unpark ä¸å¿…</li>
<li>park &amp; unpark æ˜¯ä»¥çº¿ç¨‹ä¸ºå•ä½æ¥ã€é˜»å¡ã€‘å’Œã€å”¤é†’ã€‘çº¿ç¨‹ï¼Œè€Œ notify åªèƒ½éšæœºå”¤é†’ä¸€ä¸ªç­‰å¾…çº¿ç¨‹ï¼Œ</li>
<li>notifyAll æ˜¯å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ï¼Œå°±ä¸é‚£ä¹ˆã€ç²¾ç¡®ã€‘</li>
<li>park &amp; unpark å¯ä»¥å…ˆ umparkï¼Œè€Œ wait &amp; notify ä¸èƒ½å…ˆ notify</li>
</ul>
<p><strong>å…¶ä»–</strong></p>
<ul>
<li>parkæ˜¯locksupportçš„ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºæ‰“æ–­å½“å‰çº¿ç¨‹</li>
<li>è°ƒç”¨åä»£ç ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œä¸å¾€åæ‰§è¡Œ,ä¸æ”¹å˜isInterrupted</li>
<li>å½“isInterruptedä¸ºtrueæ—¶,parkå¤±æ•ˆ,åªæœ‰ä¸ºfalseï¼Œpark&amp;unparkæ‰ç”Ÿæ•ˆ</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Thread thread1 = new Thread(()-&gt;&#123;                </span><br><span class="line">    try &#123;                                        </span><br><span class="line">        System.out.println(&quot;å¼€å§‹ç¡çœ &quot;);              </span><br><span class="line">        Thread.sleep(1000);                      </span><br><span class="line">    &#125; catch (InterruptedException e) &#123;           </span><br><span class="line">        e.printStackTrace();                     </span><br><span class="line">    &#125;                                            </span><br><span class="line">    System.out.println(&quot;å¼€å§‹park&quot;);                </span><br><span class="line">    LockSupport.park();                          </span><br><span class="line">    System.out.println(&quot;parkç»“æŸ&quot;);                </span><br><span class="line">&#125;);                                              </span><br><span class="line">thread1.start();                                 </span><br><span class="line">Thread.sleep(3000);                              </span><br><span class="line">System.out.println(&quot;å¼€å§‹unpark&quot;);                  </span><br><span class="line">LockSupport.unpark(thread1);                                                                                                             </span><br></pre></td></tr></table></figure>
<p><strong>park &amp; unparkåŸç†</strong></p>
<p><strong>park</strong></p>
<blockquote>
<p><strong>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ä¸€ä¸ª Parker å¯¹è±¡ï¼Œç”±ä¸‰éƒ¨åˆ†ç»„æˆ _counterï¼Œ_cond å’Œ_mutex,éƒ½æ˜¯cä»£ç å®ç°çš„javaçœ‹ä¸åˆ°</strong></p>
<p>çº¿ç¨‹å°±åƒä¸€ä¸ªæ—…äººï¼ŒParker å°±åƒä»–éšèº«æºå¸¦çš„èƒŒåŒ…ï¼Œæ¡ä»¶å˜é‡å°±å¥½æ¯”èƒŒåŒ…ä¸­çš„å¸ç¯·ã€‚counter å°±å¥½æ¯”èƒŒåŒ…ä¸­çš„å¤‡ç”¨å¹²ç²®ï¼ˆ0 ä¸ºè€—å°½ï¼Œ1ä¸ºå……è¶³ï¼‰<br>è°ƒç”¨ park å°±æ˜¯è¦çœ‹éœ€ä¸éœ€è¦åœä¸‹æ¥æ­‡æ¯</p>
<ul>
<li>å¦‚æœå¤‡ç”¨å¹²ç²®è€—å°½ï¼Œé‚£ä¹ˆé’»è¿›å¸ç¯·æ­‡æ¯</li>
<li>å¦‚æœå¤‡ç”¨å¹²ç²®å……è¶³ï¼Œé‚£ä¹ˆä¸éœ€åœç•™ï¼Œç»§ç»­å‰è¿›</li>
</ul>
<p>è°ƒç”¨ unparkï¼Œå°±å¥½æ¯”ä»¤å¹²ç²®å……è¶³</p>
<ul>
<li>å¦‚æœè¿™æ—¶çº¿ç¨‹è¿˜åœ¨å¸ç¯·ï¼Œå°±å”¤é†’è®©ä»–ç»§ç»­å‰è¿›</li>
<li>å¦‚æœè¿™æ—¶çº¿ç¨‹è¿˜åœ¨è¿è¡Œï¼Œé‚£ä¹ˆä¸‹æ¬¡ä»–è°ƒç”¨ park æ—¶ï¼Œä»…æ˜¯æ¶ˆè€—æ‰å¤‡ç”¨å¹²ç²®ï¼Œä¸éœ€åœç•™ç»§ç»­å‰è¿›</li>
<li>å› ä¸ºèƒŒåŒ…ç©ºé—´æœ‰é™ï¼Œå¤šæ¬¡è°ƒç”¨ unpark ä»…ä¼šè¡¥å……ä¸€ä»½å¤‡ç”¨å¹²ç²®</li>
</ul>
</blockquote>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-10_16.04.10.png " width="70%" loading="lazy">

<blockquote>
<ol>
<li>å½“å‰çº¿ç¨‹è°ƒç”¨ Unsafe.park0 æ–¹æ³•</li>
<li>æ£€æŸ¥_counterï¼Œæœ¬æƒ…å†µä¸º0ï¼Œè¿™æ—¶ï¼Œè·å¾—_mutex äº’æ–¥é”</li>
<li>çº¿ç¨‹è¿›å…¥_cond æ¡ä»¶å˜é‡é˜»å¡</li>
<li>è®¾ç½®_counter =0</li>
</ol>
</blockquote>
<p><strong>parkåå†unpark</strong></p>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-10_16.06.39.png " width="70%" loading="lazy">



<blockquote>
<ol>
<li>è°ƒç”¨ Unsafe.unpark(Thread_0) æ–¹æ³•ï¼Œè®¾ç½®_counter ä¸º1</li>
<li>å”¤é†’_cond æ¡ä»¶å˜é‡ä¸­çš„ Thread 0</li>
<li>Thread 0 æ¢å¤è¿è¡Œ</li>
<li>è®¾ç½® counter ä¸º0</li>
</ol>
</blockquote>
<p><strong>å…ˆunpark</strong></p>
<img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-10_16.05.49.png " width="70%" loading="lazy">


<blockquote>
<ol>
<li>è°ƒç”¨ Unsafe.unpark(Thread 0) æ–¹æ³•ï¼Œè®¾ç½® counter ä¸ºï¼</li>
<li>å½“å‰çº¿ç¨‹è°ƒç”¨ Unsafe.park0 æ–¹æ³•</li>
<li>æ£€æŸ¥_counterï¼Œæœ¬æƒ…å†µä¸º1ï¼Œè¿™æ—¶çº¿ç¨‹æ— éœ€é˜»å¡ï¼Œç»§ç»­è¿è¡Œ</li>
<li>è®¾ç½®_counter ä¸º0</li>
</ol>
</blockquote>
<h2 id="çº¿ç¨‹çŠ¶æ€è½¬æ¢"><a href="#çº¿ç¨‹çŠ¶æ€è½¬æ¢" class="headerlink" title="çº¿ç¨‹çŠ¶æ€è½¬æ¢"></a>çº¿ç¨‹çŠ¶æ€è½¬æ¢</h2><img src="http://hexo.xuxin.world/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2FiShot_2022-08-10_16.31.02.png" width="70%" loading="lazy">

<blockquote>
<p>1:è°ƒç”¨startè¿›å…¥runnable<br>2:è°ƒç”¨waitæ—¶è¿›å…¥waitingï¼Œè°ƒç”¨notify,interruptæ—¶ï¼Œç«äº‰é”å¤±è´¥è¿›å…¥blockedï¼Œç«äº‰é”æˆåŠŸè¿›å…¥runnable<br>3:è°ƒç”¨joinè¿›å…¥waitingï¼Œç­‰å¾…çš„çº¿ç¨‹è¿è¡Œç»“æŸæˆ–è€…è°ƒç”¨interruptè¿›å…¥runnableã€‚<br>4:è°ƒç”¨parkè¿›å…¥waitingï¼Œè°ƒç”¨unparkæˆ–è€…interruptè¿›å…¥runnable<br>5:è°ƒç”¨wait(long)è¿›å…¥time_waiting,è‡ªç„¶ç»“æŸæˆ–è€…è°ƒç”¨notify,interruptæ—¶ï¼Œç«äº‰é”å¤±è´¥è¿›å…¥blockedï¼Œç«äº‰é”æˆåŠŸè¿›å…¥runnable<br>6:è°ƒç”¨join(long)è¿›å…¥time_waitingï¼Œè‡ªç„¶ç»“æŸæˆ–è€…è°ƒç”¨interruptæ—¶è¿›å…¥runnable<br>7:è°ƒç”¨sleep(long)è¿›å…¥time_waitingï¼Œè‡ªç„¶ç»“æŸè¿›å…¥runnable<br>8:è°ƒç”¨LockSupport.parkNanos(long nanos)æˆ–è€…LockSupport.parkUntil(long millis)è¿›å…¥time_waitingï¼Œè°ƒç”¨unparkæˆ–è€…interruptæˆ–è€…è¶…æ—¶ï¼Œè¿›å…¥runnable<br>9:ç«äº‰é”å¤±è´¥è¿›å…¥blockedï¼Œç«äº‰é”æˆåŠŸè¿›å…¥runnable<br>10:ä»£ç è¿è¡Œå®Œæ¯•è¿›å…¥</p>
</blockquote>
<h2 id="æ´»è·ƒæ€§"><a href="#æ´»è·ƒæ€§" class="headerlink" title="æ´»è·ƒæ€§"></a>æ´»è·ƒæ€§</h2><h3 id="å¤šæŠŠé”"><a href="#å¤šæŠŠé”" class="headerlink" title="å¤šæŠŠé”"></a>å¤šæŠŠé”</h3><blockquote>
<p>æ ¹æ®å¯¹è±¡æ‰§è¡Œä¸åŒè¡Œä¸ºæ—¶,é”åŒä¸€å¯¹è±¡å®¹æ˜“é€ æˆä¸å¿…è¦çš„å¹¶å‘éšæ‚£<br><strong>è§£å†³ï¼šä½¿ç”¨å¤šæŠŠé”</strong></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">private static Object lock1 = new Object();</span><br><span class="line">private static Object lock2 = new Object();</span><br><span class="line"></span><br><span class="line">public void do1() &#123;</span><br><span class="line">    synchronized (lock1) &#123;</span><br><span class="line">        //do1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public void do2() &#123;</span><br><span class="line">    synchronized (lock2) &#123;</span><br><span class="line">        //do2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>å°†é”çš„ç²’åº¦ç»†åˆ†</strong></p>
<ul>
<li>å¥½å¤„ï¼Œæ˜¯å¯ä»¥å¢å¼ºå¹¶å‘åº¦</li>
<li>åå¤„ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹éœ€è¦åŒæ—¶è·å¾—å¤šæŠŠé”ï¼Œå°±å®¹æ˜“å‘ç”Ÿæ­»é”</li>
</ul>
</blockquote>
<h3 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h3><blockquote>
<p>æœ‰è¿™æ ·çš„æƒ…å†µï¼šä¸€ä¸ªçº¿ç¨‹éœ€è¦åŒæ—¶è·å–å¤šæŠŠé”ï¼Œè¿™æ—¶å°±å®¹æ˜“å‘ç”Ÿæ­»é”<br>t1çº¿ç¨‹ è·å¾—Aå¯¹è±¡é”ï¼Œæ¥ä¸‹æ¥æƒ³è·å–Bå¯¹è±¡çš„é”<br>t2 çº¿ç¨‹è·å¾—Bå¯¹è±¡é”ï¼Œæ¥ä¸‹æ¥æƒ³è·å– Aå¯¹è±¡çš„é”</p>
</blockquote>
<p><strong>å®šä½æ­»é”</strong></p>
<blockquote>
<p>æ£€æµ‹æ­»é”å¯ä»¥ä½¿ç”¨ jconsoleå·¥å…·ï¼Œæˆ–è€…ä½¿ç”¨ jps å®šä½è¿›ç¨‹ idï¼Œå†ç”¨ jstack å®šä½æ­»é”</p>
</blockquote>
<h3 id="æ´»é”"><a href="#æ´»é”" class="headerlink" title="æ´»é”"></a>æ´»é”</h3><blockquote>
<p>ç”±äºä»£ç ä¸­ä¿©çº¿ç¨‹çš„é€€å‡ºæ¡ä»¶äº’ç›¸åˆ¶çº¦å¯¼è‡´ä¸æ–­è¿è¡Œï¼Œæ— æ³•é€€å‡º</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">static volatile int count = 10;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        new Thread(() -&gt; &#123;</span><br><span class="line">            while (count &gt; 0) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    Thread.sleep(200);</span><br><span class="line">                    count--;</span><br><span class="line">                    System.out.println(&quot;count:&quot; + count);</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">        new Thread(() -&gt; &#123;</span><br><span class="line">            while (count &lt; 20) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    Thread.sleep(200);</span><br><span class="line">                    count++;</span><br><span class="line">                    System.out.println(&quot;count:&quot; + count);</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="é¥¥é¥¿ç°è±¡"><a href="#é¥¥é¥¿ç°è±¡" class="headerlink" title="é¥¥é¥¿ç°è±¡"></a>é¥¥é¥¿ç°è±¡</h3><blockquote>
<p>è§£å†³æ­»é”é—®é¢˜å¯ä»¥æ”¹å˜è·å–é”çš„é¡ºåºï¼Œéƒ½æ˜¯å…ˆAå†Bè¿™æ ·å°±å¯ä»¥è§£å†³äº†ï¼Œä½†æ˜¯ä¹Ÿé€ æˆäº†é¥¥é¥¿ç°è±¡ï¼Œä¸€æ–¹ä¸€ç›´éš¾ä»¥è·å–é”<br>å¾ˆå¤šæ•™ç¨‹ä¸­æŠŠé¥¥é¥¿å®šä¹‰ä¸ºï¼Œä¸€ä¸ªçº¿ç¨‹ç”±äºä¼˜å…ˆçº§å¤ªä½ï¼Œå§‹ç»ˆå¾—ä¸åˆ° CPU è°ƒåº¦æ‰§è¡Œï¼Œä¹Ÿä¸èƒ½å¤Ÿç»“æŸï¼Œé¥¥é¥¿çš„æƒ…å†µä¸æ˜“æ¼”ç¤ºï¼Œè®²è¯»å†™é”æ—¶ä¼šæ¶‰åŠé¥¥é¥¿é—®é¢˜</p>
</blockquote>
<h2 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="ReentrantLock"></a>ReentrantLock</h2><blockquote>
<p><strong>ç›¸å¯¹äº synchronized å®ƒå…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹</strong></p>
<ul>
<li>å¯ä¸­æ–­(å…¶ä»–çº¿ç¨‹å¯ä»¥ä¸­æ–­å¦ä¸€ä¸ªçº¿ç¨‹çš„é”)</li>
<li>å¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´</li>
<li>å¯ä»¥è®¾ç½®ä¸ºå…¬å¹³é”(å…¬å¹³ç«äº‰)</li>
<li>æ”¯æŒå¤šä¸ªæ¡ä»¶å˜é‡(æœ‰å¤šä¸ªä¼‘æ¯å®¤ï¼ŒæŒ‰æ¡ä»¶è¿›å…¥entryset)</li>
</ul>
<p><strong>ä¸ synchronized ä¸€æ ·ï¼Œéƒ½æ”¯æŒå¯é‡å…¥</strong></p>
</blockquote>
<p><strong>è¯­æ³•</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//è·å–é”</span><br><span class="line">Lock reentrantLock = new ReentrantLock();</span><br><span class="line">try&#123;</span><br><span class="line">    reentrantLock.lock();</span><br><span class="line">    //ä¸´ç•ŒåŒº</span><br><span class="line">&#125;finally &#123;</span><br><span class="line">    //é‡Šæ”¾é”</span><br><span class="line">    reentrantLock.unlock();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>reentrantLock.lock()æ”¾åœ¨tryé‡Œé¢å’Œå¤–é¢éƒ½æ˜¯ä¸€æ ·çš„</p>
</blockquote>
<p><strong>å¯é‡å…¥</strong></p>
<blockquote>
<p>å¯é‡å…¥æ˜¯æŒ‡åŒä¸€ä¸ªçº¿ç¨‹å¦‚æœé¦–æ¬¡è·å¾—äº†è¿™æŠŠé”ï¼Œé‚£ä¹ˆå› ä¸ºå®ƒæ˜¯è¿™æŠŠé”çš„æ‹¥æœ‰è€…ï¼Œå› æ­¤æœ‰æƒåˆ©å†æ¬¡è·å–è¿™æŠŠé”<br>å¦‚æœæ˜¯ä¸å¯é‡å…¥é”ï¼Œé‚£ä¹ˆç¬¬äºŒæ¬¡è·å¾—é”æ—¶ï¼Œè‡ªå·±ä¹Ÿä¼šè¢«é”æŒ¡ä½</p>
</blockquote>
<p><strong>å¯æ‰“æ–­</strong></p>
<blockquote>
<p>æ²¡æœ‰è·å–é”å°±è¿›å…¥é˜»å¥—é˜Ÿåˆ—ï¼Œå…¶å®ƒçº¿ç¨‹å¯ä»¥ç”¨ interruput æ–¹æ³•æ‰“æ–­ï¼Œè®©å…¶ç»“æŸåŒæ­¥ä»£ç <br>å¯æ‰“æ–­ä¹Ÿæ˜¯ä¸€ç§é¢„é˜²æ­»é”çš„æªæ–½</p>
</blockquote>
</div></section><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="æ‰“èµ" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><span class="icon iconify" data-icon="ri:hand-coin-line"></span></span><div id="reward-comment">I'm so cute. Please give me money.</div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>å¾é‘«</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="http://example.com/2022/08/08/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" title="JUCå¹¶å‘ç¼–ç¨‹">http://example.com/2022/08/08/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> è®¸å¯åè®®ã€‚</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/08/08/JUC%E5%B9%B6%E5%8F%91%E5%BA%94%E7%94%A8/" rel="prev" title="JUCå¹¶å‘åº”ç”¨"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">JUCå¹¶å‘åº”ç”¨</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/08/05/%E5%88%9D%E5%A7%8BJVM/" rel="next" title="JVM"><span class="post-nav-text">JVM</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 â€“ 2022 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> å¾é‘«</span></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></body></html>