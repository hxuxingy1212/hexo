<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="å¾é‘«"><meta name="copyright" content="å¾é‘«"><meta name="generator" content="Hexo 5.4.2"><meta name="theme" content="hexo-theme-yun"><title>MyBatis-plus | å¾é‘«çš„ç¬”è®°</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.3.3/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"example.com","root":"/","title":"å¾é‘«çš„ç¬”è®°","version":"1.10.6","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","fireworks":{"colors":null},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><meta name="description" content="SpringBootä½¿ç”¨MyBatisçš„xmlæ­¥éª¤  æ·»åŠ é…ç½®ï¼šè®©mybatisçŸ¥é“xmlæ–‡ä»¶çš„ä½ç½®  12mybatis-plus:  mapper-locations: classpath*:com&#x2F;example&#x2F;dao&#x2F;*.xml   ä¿®æ”¹pom.xml:   é—®é¢˜ï¼šåŠ è½½ä¸äº†é¡¹ç›®ä¸­çš„xmlæ–‡ä»¶mavené»˜è®¤åŠ è½½æœºåˆ¶ï¼Œåªä¼šæŠŠ srcâ€“mainâ€“javaæ–‡ä»¶å¤¹ä¸­çš„Javaç±»å‹æ–‡ä»¶è¿›è¡ŒåŠ è½½ï¼Œå…¶ä»–">
<meta property="og:type" content="article">
<meta property="og:title" content="MyBatis-plus">
<meta property="og:url" content="http://example.com/2022/09/22/mybatis/MyBatis-plus/index.html">
<meta property="og:site_name" content="å¾é‘«çš„ç¬”è®°">
<meta property="og:description" content="SpringBootä½¿ç”¨MyBatisçš„xmlæ­¥éª¤  æ·»åŠ é…ç½®ï¼šè®©mybatisçŸ¥é“xmlæ–‡ä»¶çš„ä½ç½®  12mybatis-plus:  mapper-locations: classpath*:com&#x2F;example&#x2F;dao&#x2F;*.xml   ä¿®æ”¹pom.xml:   é—®é¢˜ï¼šåŠ è½½ä¸äº†é¡¹ç›®ä¸­çš„xmlæ–‡ä»¶mavené»˜è®¤åŠ è½½æœºåˆ¶ï¼Œåªä¼šæŠŠ srcâ€“mainâ€“javaæ–‡ä»¶å¤¹ä¸­çš„Javaç±»å‹æ–‡ä»¶è¿›è¡ŒåŠ è½½ï¼Œå…¶ä»–">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-09-22T09:22:37.053Z">
<meta property="article:modified_time" content="2022-09-27T02:01:52.783Z">
<meta property="article:author" content="å¾é‘«">
<meta property="article:tag" content="JavaWeb">
<meta name="twitter:card" content="summary"><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="å¾é‘«"><img width="96" loading="lazy" src="/images/touxiang2.jpg" alt="å¾é‘«"><span class="site-author-status" title="ä¸æƒ³ä¸Šå­¦">ğŸ˜­</span></a><div class="site-author-name"><a href="/about/">å¾é‘«</a></div><span class="site-name">å¾é‘«çš„ç¬”è®°</span><sub class="site-subtitle"></sub><div class="site-description">è®°å½•æ¯ä¸€å¤©æ‰€å­¦</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">19</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">12</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">11</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="æ–‡æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:settings-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://qun.qq.com/qqweb/qunpro/share?_wv=3&amp;_wwv=128&amp;appChannel=share&amp;inviteCode=28OEdR&amp;appChannel=share&amp;businessType=9&amp;from=246610&amp;biz=ka" title="QQ é¢‘é“ - å°äº‘ä¹‹å®¶" target="_blank" style="color:#12B7F5"><span class="icon iconify" data-icon="ri:qq-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/YunYouJun" title="GitHub" target="_blank" style="color:#6e5494"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://cdn.yunyoujun.cn/img/about/white-qrcode-and-search.jpg" title="å¾®ä¿¡" target="_blank" style="color:#1AAD19"><span class="icon iconify" data-icon="ri:wechat-2-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:me@yunyoujun.cn" title="E-Mail" target="_blank" style="color:#8E71C1"><span class="icon iconify" data-icon="ri:mail-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/albums/" title="ç›¸å†Œ" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:camera-fill"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringBoot%E4%BD%BF%E7%94%A8MyBatis%E7%9A%84xml"><span class="toc-number">1.</span> <span class="toc-text">SpringBootä½¿ç”¨MyBatisçš„xml</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">2.</span> <span class="toc-text">æ¡ä»¶æ„é€ å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#allEq"><span class="toc-number">2.1.</span> <span class="toc-text">allEq</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E5%A4%A7%E5%B0%8F%EF%BC%9A-lt-gt-gt-gt-lt-lt"><span class="toc-number">2.2.</span> <span class="toc-text">æ¯”è¾ƒå¤§å°ï¼š ( &#x3D;, &lt;&gt;, &gt;, &gt;&#x3D;, &lt;, &lt;&#x3D; )</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8C%83%E5%9B%B4%EF%BC%9A%EF%BC%88between%E3%80%81not-between%E3%80%81in%E3%80%81not-in%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">èŒƒå›´ï¼šï¼ˆbetweenã€not betweenã€inã€not inï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D%EF%BC%9A%EF%BC%88like%EF%BC%89"><span class="toc-number">2.4.</span> <span class="toc-text">æ¨¡ç³ŠåŒ¹é…ï¼šï¼ˆlikeï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A9%BA%E5%80%BC%E6%AF%94%E8%BE%83%EF%BC%9A%EF%BC%88isNull%E3%80%81isNotNull%EF%BC%89"><span class="toc-number">2.5.</span> <span class="toc-text">ç©ºå€¼æ¯”è¾ƒï¼šï¼ˆisNullã€isNotNullï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E3%80%81%E6%8E%92%E5%BA%8F%EF%BC%9A%EF%BC%88group%E3%80%81having%E3%80%81order%EF%BC%89"><span class="toc-number">2.6.</span> <span class="toc-text">åˆ†ç»„ã€æ’åºï¼šï¼ˆgroupã€havingã€orderï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%BC%E6%8E%A5%E3%80%81%E5%B5%8C%E5%A5%97-sql%EF%BC%9A%EF%BC%88or%E3%80%81and%E3%80%81nested%E3%80%81apply%EF%BC%89"><span class="toc-number">2.7.</span> <span class="toc-text">æ‹¼æ¥ã€åµŒå¥— sqlï¼šï¼ˆorã€andã€nestedã€applyï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QueryWrapper%E6%9D%A1%E4%BB%B6"><span class="toc-number">2.8.</span> <span class="toc-text">QueryWrapperæ¡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UpdateWrapper%E6%9D%A1%E4%BB%B6"><span class="toc-number">2.9.</span> <span class="toc-text">UpdateWrapperæ¡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LambdaQueryWrapper"><span class="toc-number">2.10.</span> <span class="toc-text">LambdaQueryWrapper</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E5%A4%A7%E5%85%A8"><span class="toc-number">3.</span> <span class="toc-text">æ³¨è§£å¤§å…¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Tablename"><span class="toc-number">3.1.</span> <span class="toc-text">@Tablename</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TableField"><span class="toc-number">3.2.</span> <span class="toc-text">@TableField</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapperScan%E4%B8%8E-Mapper"><span class="toc-number">3.3.</span> <span class="toc-text">@MapperScanä¸@Mapper</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ActiveRecord"><span class="toc-number">4.</span> <span class="toc-text">**ActiveRecord **</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%80%9A%E7%94%A8Iservice"><span class="toc-number">5.</span> <span class="toc-text">é€šç”¨Iservice</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E6%9C%BA%E5%88%B6%EF%BC%88%E5%8E%9F%E7%94%9Fmybatis%EF%BC%89"><span class="toc-number">6.</span> <span class="toc-text">æ’ä»¶æœºåˆ¶ï¼ˆåŸç”Ÿmybatisï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E5%88%86%E6%9E%90%E6%8F%92%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text">æ‰§è¡Œåˆ†ææ’ä»¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%8F%92%E4%BB%B6%EF%BC%88%E5%88%86%E6%9E%90%E6%89%93%E5%8D%B0%E6%8F%92%E4%BB%B6%EF%BC%89"><span class="toc-number">8.</span> <span class="toc-text">æ€§èƒ½åˆ†ææ’ä»¶ï¼ˆåˆ†ææ‰“å°æ’ä»¶ï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%90%E8%A7%82%E9%94%81%E6%8F%92%E4%BB%B6"><span class="toc-number">9.</span> <span class="toc-text">ä¹è§‚é”æ’ä»¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E5%99%A8%EF%BC%88%E7%95%A5%EF%BC%89"><span class="toc-number">10.</span> <span class="toc-text">SQLæ³¨å…¥å™¨ï¼ˆç•¥ï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85"><span class="toc-number">11.</span> <span class="toc-text">è‡ªåŠ¨å¡«å……</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4"><span class="toc-number">12.</span> <span class="toc-text">é€»è¾‘åˆ é™¤</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9E%9A%E4%B8%BE"><span class="toc-number">13.</span> <span class="toc-text">è‡ªå®šä¹‰æšä¸¾</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%A4%A7%E5%85%A8"><span class="toc-number">14.</span> <span class="toc-text">é…ç½®å¤§å…¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#config-location-%E5%8A%A0%E8%BD%BDmybatis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">14.0.1.</span> <span class="toc-text">config-location(åŠ è½½mybatisé…ç½®æ–‡ä»¶)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mapper-locations-%E5%8A%A0%E8%BD%BDsql%E7%9A%84xml%E6%96%87%E4%BB%B6"><span class="toc-number">14.0.2.</span> <span class="toc-text">mapper-locations(åŠ è½½sqlçš„xmlæ–‡ä»¶)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#table-prefix-%E8%AE%BE%E7%BD%AE%E6%89%80%E6%9C%89%E8%A1%A8%E7%9A%84%E9%80%9A%E7%94%A8%E5%89%8D%E7%BC%80%E5%90%8D%E7%A7%B0"><span class="toc-number">14.0.3.</span> <span class="toc-text">table-prefix(è®¾ç½®æ‰€æœ‰è¡¨çš„é€šç”¨å‰ç¼€åç§°)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#id-type-id%E8%87%AA%E5%A2%9E%E9%95%BF"><span class="toc-number">14.0.4.</span> <span class="toc-text">id-type(idè‡ªå¢é•¿)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#datasource-%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE"><span class="toc-number">14.0.5.</span> <span class="toc-text">datasource(æ•°æ®æºé…ç½®)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typeAliasesPackage-%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-number">14.0.6.</span> <span class="toc-text">typeAliasesPackage (èµ·åˆ«å)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#map-underscore-to-camel-case-%E5%BC%80%E5%90%AF%E5%AD%97%E6%AE%B5%E5%90%8D%E5%AE%9E%E4%BD%93%E5%90%8D%E8%BD%AC%E6%8D%A2"><span class="toc-number">14.0.7.</span> <span class="toc-text">map-underscore-to-camel-case(å¼€å¯å­—æ®µåå®ä½“åè½¬æ¢)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cacheEnabled-%E5%BC%80%E5%90%AF%E6%88%96%E5%85%B3%E9%97%AD%E9%85%8D%E7%BD%AE%E7%9A%84%E7%BC%93%E5%AD%98"><span class="toc-number">14.0.8.</span> <span class="toc-text">cacheEnabled(å¼€å¯æˆ–å…³é—­é…ç½®çš„ç¼“å­˜)</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="http://example.com/2022/09/22/mybatis/MyBatis-plus/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="å¾é‘«"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="å¾é‘«çš„ç¬”è®°"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">MyBatis-plus</h1><div class="post-meta"><div class="post-time"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2022-09-22 17:22:37" itemprop="dateCreated datePublished" datetime="2022-09-22T17:22:37+08:00">2022-09-22</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-09-27 10:01:52" itemprop="dateModified" datetime="2022-09-27T10:01:52+08:00">2022-09-27</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/JavaWeb/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">JavaWeb</span></a></span> > <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/JavaWeb/MyBatis/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">MyBatis</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/JavaWeb/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">JavaWeb</span></a></span></div><div class="post-author"><span class="author-name">å¾é‘«</span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h1 id="SpringBootä½¿ç”¨MyBatisçš„xml"><a href="#SpringBootä½¿ç”¨MyBatisçš„xml" class="headerlink" title="SpringBootä½¿ç”¨MyBatisçš„xml"></a><strong>SpringBootä½¿ç”¨MyBatisçš„xml</strong></h1><p><strong>æ­¥éª¤</strong></p>
<ol>
<li>æ·»åŠ é…ç½®ï¼šè®©mybatisçŸ¥é“xmlæ–‡ä»¶çš„ä½ç½®</li>
</ol>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:com/example/dao/*.xml</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä¿®æ”¹pom.xml:</li>
</ol>
<blockquote>
<p>é—®é¢˜ï¼šåŠ è½½ä¸äº†é¡¹ç›®ä¸­çš„xmlæ–‡ä»¶<br>mavené»˜è®¤åŠ è½½æœºåˆ¶ï¼Œåªä¼šæŠŠ srcâ€“mainâ€“javaæ–‡ä»¶å¤¹ä¸­çš„Javaç±»å‹æ–‡ä»¶è¿›è¡ŒåŠ è½½ï¼Œå…¶ä»–ç±»å‹æ–‡ä»¶ä¸ä¼šåŠ è½½<br>è®©mavenåŠ è½½xmlæ–‡ä»¶ï¼Œé»˜è®¤ä¸åŠ è½½çš„</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span> </span><br><span class="line">       <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼šå½“èµ„æºæ–‡ä»¶ä¸æ¥å£æ–‡ä»¶å¤„äºåŒä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œç¬¬ä¸€æ­¥å¯ä»¥ä¸åš</p>
</blockquote>
<h1 id="æ¡ä»¶æ„é€ å™¨"><a href="#æ¡ä»¶æ„é€ å™¨" class="headerlink" title="æ¡ä»¶æ„é€ å™¨"></a><strong>æ¡ä»¶æ„é€ å™¨</strong></h1><h2 id="allEq"><a href="#allEq" class="headerlink" title="allEq"></a><strong>allEq</strong></h2><p><strong>ä¸‰ç§ç”¨æ³•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">allEq(Map&lt;R, V&gt; params)</span><br><span class="line">allEq(Map&lt;R, V&gt; params, <span class="type">boolean</span> null2IsNull)<span class="comment">//keyæ˜¯å¦ä¸ºnullï¼ˆA isnullï¼‰ï¼Œæ˜¯nullä¸åŠ å…¥where</span></span><br><span class="line">allEq(<span class="type">boolean</span> condition, Map&lt;R, V&gt; params, <span class="type">boolean</span> null2IsNull)</span><br></pre></td></tr></table></figure>

<p>ä¾‹1: allEq({id:1,name:â€è€ç‹â€,age:null}) â€”&gt; id = 1 and name = â€˜è€ç‹â€™ and age is null </p>
<p>ä¾‹2: allEq({id:1,name:â€è€ç‹â€,age:null}, false) â€”&gt; id = 1 and name = â€˜è€ç‹â€™  </p>
<p><strong>å¯ä»¥åŠ å…¥è¿‡æ»¤å™¨</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">allEq(BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params)</span><br><span class="line">allEq(BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params, <span class="type">boolean</span> null2IsNull)</span><br><span class="line">allEq(<span class="type">boolean</span> condition, BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params, <span class="type">boolean</span></span><br><span class="line">null2IsNull)</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrapper.allEq((k, v) -&gt; (k.equals(<span class="string">&quot;name&quot;</span>) || parms.get(k)==<span class="string">&quot;å¾é‘«&quot;</span>,parms);</span><br></pre></td></tr></table></figure>

<h2 id="æ¯”è¾ƒå¤§å°ï¼š-lt-gt-gt-gt-lt-lt"><a href="#æ¯”è¾ƒå¤§å°ï¼š-lt-gt-gt-gt-lt-lt" class="headerlink" title="æ¯”è¾ƒå¤§å°ï¼š ( =, &lt;&gt;, &gt;, &gt;=, &lt;, &lt;= )"></a><strong>æ¯”è¾ƒå¤§å°ï¼š ( =, &lt;&gt;, &gt;, &gt;=, &lt;, &lt;= )</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">eq(R column, Object val); <span class="comment">// ç­‰ä»·äº =ï¼Œä¾‹: eq(&quot;name&quot;, &quot;è€ç‹&quot;) ---&gt; name = &#x27;è€ç‹&#x27;</span></span><br><span class="line">ne(R column, Object val); <span class="comment">// ç­‰ä»·äº &lt;&gt;ï¼Œä¾‹: ne(&quot;name&quot;, &quot;è€ç‹&quot;) ---&gt; name &lt;&gt; &#x27;è€ç‹&#x27;</span></span><br><span class="line">gt(R column, Object val); <span class="comment">// ç­‰ä»·äº &gt;ï¼Œä¾‹: gt(&quot;name&quot;, &quot;è€ç‹&quot;) ---&gt; name &gt; &#x27;è€ç‹&#x27;</span></span><br><span class="line">ge(R column, Object val); <span class="comment">// ç­‰ä»·äº &gt;=ï¼Œä¾‹: ge(&quot;name&quot;, &quot;è€ç‹&quot;) ---&gt; name &gt;= &#x27;è€ç‹&#x27;</span></span><br><span class="line">lt(R column, Object val); <span class="comment">// ç­‰ä»·äº &lt;ï¼Œä¾‹: lt(&quot;name&quot;, &quot;è€ç‹&quot;) ---&gt; name &lt; &#x27;è€ç‹&#x27;</span></span><br><span class="line">le(R column, Object val); <span class="comment">// ç­‰ä»·äº &lt;=ï¼Œä¾‹: le(&quot;name&quot;, &quot;è€ç‹&quot;) ---&gt; name &lt;= &#x27;è€ç‹&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="èŒƒå›´ï¼šï¼ˆbetweenã€not-betweenã€inã€not-inï¼‰"><a href="#èŒƒå›´ï¼šï¼ˆbetweenã€not-betweenã€inã€not-inï¼‰" class="headerlink" title="èŒƒå›´ï¼šï¼ˆbetweenã€not betweenã€inã€not inï¼‰"></a><strong>èŒƒå›´ï¼šï¼ˆbetweenã€not betweenã€inã€not inï¼‰</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">   between(R column, Object val1, Object val2); </span><br><span class="line"><span class="comment">// ä¾‹ï¼š between(&quot;age&quot;, 18, 30) ---&gt; age between 18 and 30</span></span><br><span class="line">   notBetween(R column, Object val1, Object val2); </span><br><span class="line"><span class="comment">// ä¾‹ï¼š notBetween(&quot;age&quot;, 18, 30) ---&gt; age not between 18 and 30</span></span><br><span class="line">   in(R column, Object... values); </span><br><span class="line"><span class="comment">// ä¾‹: in(&quot;age&quot;,&#123;1,2,3&#125;) ---&gt; age in (1,2,3)</span></span><br><span class="line">   notIn(R column, Object... values); </span><br><span class="line"><span class="comment">// ä¾‹: notIn(&quot;age&quot;,&#123;1,2,3&#125;) ---&gt; age not in (1,2,3)</span></span><br><span class="line">   inSql(R column, Object... values); </span><br><span class="line"><span class="comment">// ä¾‹: inSql(&quot;id&quot;, &quot;select id from table where id &lt; 3&quot;) ---&gt; id in (select id from table where id &lt; 3)</span></span><br><span class="line">   notInSql(R column, Object... values); </span><br><span class="line"><span class="comment">// ç­‰ä»·äº å­—æ®µ NOT IN (sql è¯­å¥)</span></span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡ç³ŠåŒ¹é…ï¼šï¼ˆlikeï¼‰"><a href="#æ¨¡ç³ŠåŒ¹é…ï¼šï¼ˆlikeï¼‰" class="headerlink" title="æ¨¡ç³ŠåŒ¹é…ï¼šï¼ˆlikeï¼‰"></a><strong>æ¨¡ç³ŠåŒ¹é…ï¼šï¼ˆlikeï¼‰</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">like(R column, Object val); <span class="comment">// ç­‰ä»·äº LIKE &#x27;%å€¼%&#x27;</span></span><br><span class="line">notLike(R column, Object val); <span class="comment">// ç­‰ä»·äº NOT LIKE &#x27;%å€¼%&#x27;</span></span><br><span class="line">likeLeft(R column, Object val); <span class="comment">// ç­‰ä»·äº LIKE &#x27;%å€¼&#x27;</span></span><br><span class="line">likeRight(R column, Object val); <span class="comment">// ç­‰ä»·äº LIKE &#x27;å€¼%&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="ç©ºå€¼æ¯”è¾ƒï¼šï¼ˆisNullã€isNotNullï¼‰"><a href="#ç©ºå€¼æ¯”è¾ƒï¼šï¼ˆisNullã€isNotNullï¼‰" class="headerlink" title="ç©ºå€¼æ¯”è¾ƒï¼šï¼ˆisNullã€isNotNullï¼‰"></a><strong>ç©ºå€¼æ¯”è¾ƒï¼šï¼ˆisNullã€isNotNullï¼‰</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">isNull(R column); <span class="comment">// ç­‰ä»·äº IS NULLï¼Œä¾‹: isNull(&quot;name&quot;) ---&gt; name is null</span></span><br><span class="line">isNotNull(R column); <span class="comment">// ç­‰ä»·äº IS NOT NULLï¼Œä¾‹: isNotNull(&quot;name&quot;) ---&gt; name is not null</span></span><br></pre></td></tr></table></figure>

<h2 id="åˆ†ç»„ã€æ’åºï¼šï¼ˆgroupã€havingã€orderï¼‰"><a href="#åˆ†ç»„ã€æ’åºï¼šï¼ˆgroupã€havingã€orderï¼‰" class="headerlink" title="åˆ†ç»„ã€æ’åºï¼šï¼ˆgroupã€havingã€orderï¼‰"></a><strong>åˆ†ç»„ã€æ’åºï¼šï¼ˆgroupã€havingã€orderï¼‰</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">groupBy(R... columns); <span class="comment">// ä¾‹: groupBy(&quot;id&quot;, &quot;name&quot;) ---&gt; group by id,name</span></span><br><span class="line">orderByAsc(R... columns); <span class="comment">//ä¾‹: orderByAsc(&quot;id&quot;, &quot;name&quot;) ---&gt; order by id ASC,name ASC</span></span><br><span class="line">orderByDesc(R... columns); <span class="comment">//ä¾‹: orderByDesc(&quot;id&quot;, &quot;name&quot;) ---&gt; order by id DESC,name DESC</span></span><br><span class="line">having(String sqlHaving, Object... params); <span class="comment">//ä¾‹: having(&quot;sum(age) &gt; &#123;0&#125;&quot;, 11) ---&gt; having sum(age) &gt; 11</span></span><br></pre></td></tr></table></figure>

<h2 id="æ‹¼æ¥ã€åµŒå¥—-sqlï¼šï¼ˆorã€andã€nestedã€applyï¼‰"><a href="#æ‹¼æ¥ã€åµŒå¥—-sqlï¼šï¼ˆorã€andã€nestedã€applyï¼‰" class="headerlink" title="æ‹¼æ¥ã€åµŒå¥— sqlï¼šï¼ˆorã€andã€nestedã€applyï¼‰"></a><strong>æ‹¼æ¥ã€åµŒå¥— sqlï¼šï¼ˆorã€andã€nestedã€applyï¼‰</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">or(); <span class="comment">// ç­‰ä»·äº a or bï¼Œ ä¾‹ï¼šeq(&quot;id&quot;,1).or().eq(&quot;name&quot;,&quot;è€ç‹&quot;) ---&gt; id = 1 or name = &#x27;è€ç‹&#x27;</span></span><br><span class="line">or(Consumer&lt;Param&gt; consumer); <span class="comment">// ç­‰ä»·äº or(a or/and b)ï¼Œor åµŒå¥—ã€‚ä¾‹: or(i -&gt; i.eq(&quot;name&quot;, &quot;æç™½&quot;).ne(&quot;status&quot;, &quot;æ´»ç€&quot;)) ---&gt; or (name = &#x27;æç™½&#x27; and status &lt;&gt; &#x27;æ´»ç€&#x27;)</span></span><br><span class="line">and(Consumer&lt;Param&gt; consumer); <span class="comment">// ç­‰ä»·äº and(a or/and b)ï¼Œand åµŒå¥—ã€‚ä¾‹: and(i -&gt; i.eq(&quot;name&quot;, &quot;æç™½&quot;).ne(&quot;status&quot;, &quot;æ´»ç€&quot;)) ---&gt; and (name = &#x27;æç™½&#x27; and status &lt;&gt; &#x27;æ´»ç€&#x27;)</span></span><br><span class="line">nested(Consumer&lt;Param&gt; consumer); <span class="comment">// ç­‰ä»·äº (a or/and b)ï¼Œæ™®é€šåµŒå¥—ã€‚ä¾‹: nested(i -&gt; i.eq(&quot;name&quot;, &quot;æç™½&quot;).ne(&quot;status&quot;, &quot;æ´»ç€&quot;)) ---&gt; (name = &#x27;æç™½&#x27; and status &lt;&gt; &#x27;æ´»ç€&#x27;)</span></span><br><span class="line">apply(String applySql, Object... params); <span class="comment">// æ‹¼æ¥sqlï¼ˆè‹¥ä¸ä½¿ç”¨ params å‚æ•°ï¼Œå¯èƒ½å­˜åœ¨ sql æ³¨å…¥ï¼‰ï¼Œä¾‹: apply(&quot;date_format(dateColumn,&#x27;%Y-%m-%d&#x27;) = &#123;0&#125;&quot;, &quot;2008-08-08&quot;) ---&gt; date_format(dateColumn,&#x27;%Y-%m-%d&#x27;) = &#x27;2008-08-08&#x27;&quot;)</span></span><br><span class="line">last(String lastSql); <span class="comment">// æ— è§†ä¼˜åŒ–è§„åˆ™ç›´æ¥æ‹¼æ¥åˆ° sql çš„æœ€åï¼Œå¯èƒ½å­˜è‹¥åœ¨ sql æ³¨å…¥ã€‚</span></span><br><span class="line">exists(String existsSql); <span class="comment">// æ‹¼æ¥ exists è¯­å¥ã€‚ä¾‹: exists(&quot;select id from table where age = 1&quot;) ---&gt; exists (select id from table where age = 1)</span></span><br></pre></td></tr></table></figure>

<h2 id="QueryWrapperæ¡ä»¶"><a href="#QueryWrapperæ¡ä»¶" class="headerlink" title="QueryWrapperæ¡ä»¶"></a><strong>QueryWrapperæ¡ä»¶</strong></h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select(String... sqlSelect); <span class="regexp">//</span> ç”¨äºå®šä¹‰éœ€è¦è¿”å›çš„å­—æ®µã€‚ä¾‹ï¼š select(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>) ---&gt; select id, name, age</span><br></pre></td></tr></table></figure>

<h2 id="UpdateWrapperæ¡ä»¶"><a href="#UpdateWrapperæ¡ä»¶" class="headerlink" title="UpdateWrapperæ¡ä»¶"></a><strong>UpdateWrapperæ¡ä»¶</strong></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span>(String column, Object val); // ç”¨äºè®¾ç½® <span class="built_in">set</span> å­—æ®µå€¼ã€‚ä¾‹: <span class="built_in">set</span>(<span class="string">&quot;name&quot;</span>, null) ---&gt; <span class="built_in">set</span> name = null</span><br><span class="line">setSql(String sql); // ç”¨äºè®¾ç½® <span class="built_in">set</span> å­—æ®µå€¼ã€‚ä¾‹: setSql(<span class="string">&quot;name = &#x27;è€æå¤´&#x27;&quot;</span>) ---&gt; <span class="built_in">set</span> name = <span class="string">&#x27;è€æå¤´&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="LambdaQueryWrapper"><a href="#LambdaQueryWrapper" class="headerlink" title="LambdaQueryWrapper"></a><strong>LambdaQueryWrapper</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LambdaQueryWrapper&lt;User&gt; wrapper1 = new LambdaQueryWrapper&lt;&gt;();</span><br><span class="line">wrapper1.like(User::getUsername,&quot;å¾é‘«&quot;);</span><br></pre></td></tr></table></figure>

<h1 id="æ³¨è§£å¤§å…¨"><a href="#æ³¨è§£å¤§å…¨" class="headerlink" title="æ³¨è§£å¤§å…¨"></a><strong>æ³¨è§£å¤§å…¨</strong></h1><h2 id="Tablename"><a href="#Tablename" class="headerlink" title="@Tablename"></a><strong>@Tablename</strong></h2><blockquote>
<p>ç”¨äºå…³è”æ•°æ®åº“ä¸javabeanå¯¹è±¡</p>
</blockquote>
<h2 id="TableField"><a href="#TableField" class="headerlink" title="@TableField"></a><strong>@TableField</strong></h2><table>
<thead>
<tr>
<th><strong>value</strong></th>
<th><strong>æ˜ å°„æ•°æ®åº“å­—æ®µ</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>exist</strong></td>
<td><strong>ä½¿å¾—å®ä½“ä¸­æœ‰çš„å±æ€§ï¼Œä½†æ•°æ®åº“æ²¡æœ‰ä¸æŠ¥é”™</strong></td>
</tr>
<tr>
<td><strong>fill</strong></td>
<td><strong>å­—æ®µå¡«å……ç­–ç•¥</strong></td>
</tr>
<tr>
<td><strong>update</strong></td>
<td><strong>é¢„å¤„ç†setæ³¨å…¥</strong></td>
</tr>
</tbody></table>
<blockquote>
<p>setè¯¦è§£</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹å¦‚ï¼š@TableField(.. , update=&quot;%s+1&quot;) å…¶ä¸­ %s ä¼šå¡«å……ä¸ºå­—æ®µ</span><br><span class="line">è¾“å‡º SQL ä¸ºï¼šupdate è¡¨ set å­—æ®µ=å­—æ®µ+1 where ...</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹å¦‚ï¼š@TableField(.. , update=&quot;now()&quot;) ä½¿ç”¨æ•°æ®åº“æ—¶é—´</span><br><span class="line">è¾“å‡º SQL ä¸ºï¼šupdate è¡¨ set å­—æ®µ=now() where ...</span><br></pre></td></tr></table></figure>

<blockquote>
<p>fillè¯¦è§£</p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>DEFALUT</strong></th>
<th><strong>é»˜è®¤ä¸å¤„ç†</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>INSERT</strong></td>
<td><strong>æ’å…¥å¡«å……å­—æ®µ</strong></td>
</tr>
<tr>
<td><strong>UPDATE</strong></td>
<td><strong>æ›´æ–°å¡«å……å­—æ®µ</strong></td>
</tr>
<tr>
<td><strong>INSERT_UPDATE</strong></td>
<td><strong>æ’å…¥å’Œæ›´æ–°å¡«å……å­—æ®µ</strong></td>
</tr>
</tbody></table>
<p>ä½¿ç”¨ï¼š</p>
<ol>
<li>åœ¨å®ä½“ç±»ä¸Šæ·»åŠ æ³¨è§£</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> String password;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å†™ MyMetaObjectHandler ç±»ï¼ˆç»§æ‰¿MetaObjectHandlerï¼‰</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">password</span> <span class="operator">=</span> getFieldValByName(<span class="string">&quot;password&quot;</span>, metaObject);</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == password) &#123;</span><br><span class="line">            <span class="comment">//å­—æ®µä¸ºç©ºï¼Œå¯ä»¥è¿›è¡Œå¡«å……</span></span><br><span class="line">            setFieldValByName(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>, metaObject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼šMyMetaObjectHandler ç±»éœ€è¦æ·»åŠ åˆ°springå®¹å™¨ä¸­</p>
</blockquote>
<h2 id="MapperScanä¸-Mapper"><a href="#MapperScanä¸-Mapper" class="headerlink" title="@MapperScanä¸@Mapper"></a><strong>@MapperScanä¸@Mapper</strong></h2><blockquote>
<p>@Mapperçš„ä½œç”¨ï¼šå°†daoæ¥å£çš„å®ç°ç±»åŠ è½½åˆ°springå®¹å™¨ä¸­ï¼Œå–æ¶ˆäº†xmlé…ç½®<br>@MapperScançš„ä½œç”¨ï¼šåŒ…æ‰«æï¼Œä½¿å¾—daoæ‰€æœ‰æ¥å£ä¸ç”¨å†™@Mapperï¼Œä½†ç¼–è¯‘ä¼šæŠ¥çº¢ï¼Œè€Œå¯¼å…¥mybatis-plusåï¼Œå¯ä»¥ä¸å†™</p>
</blockquote>
<p>daoæ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¼•å¯¼ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.example.dao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ActiveRecord"><a href="#ActiveRecord" class="headerlink" title="**ActiveRecord **"></a>**ActiveRecord **</h1><p>ä½œç”¨ï¼šå®ä½“ç±»è‡ªå¸¦CRUD</p>
<p>ç»§æ‰¿Model<T>å°±è¡Œï¼Œå‰ææ˜¯DAOé‡Œç»§æ‰¿äº†BaseMapper<T></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">extends</span> <span class="title class_">Model</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="é€šç”¨Iservice"><a href="#é€šç”¨Iservice" class="headerlink" title="é€šç”¨Iservice"></a><strong>é€šç”¨Iservice</strong></h1><blockquote>
<p>Iserviceç»§æ‰¿IService</p>
</blockquote>
<h1 id="æ’ä»¶æœºåˆ¶ï¼ˆåŸç”Ÿmybatisï¼‰"><a href="#æ’ä»¶æœºåˆ¶ï¼ˆåŸç”Ÿmybatisï¼‰" class="headerlink" title="æ’ä»¶æœºåˆ¶ï¼ˆåŸç”Ÿmybatisï¼‰"></a><strong>æ’ä»¶æœºåˆ¶ï¼ˆåŸç”Ÿmybatisï¼‰</strong></h1><blockquote>
<p><strong>æ‹¦æˆªç‚¹</strong></p>
<ul>
<li>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed) </li>
<li>ParameterHandler (getParameterObject, setParameters) </li>
<li>ResultSetHandler (handleResultSets, handleOutputParameters) </li>
<li>StatementHandler (prepare, parameterize, batch, update, query) </li>
</ul>
<p><strong>æ€»ä½“æ¦‚æ‹¬ä¸º</strong><br>æ‹¦æˆªæ‰§è¡Œå™¨çš„æ–¹æ³•<br>æ‹¦æˆªå‚æ•°çš„å¤„ç†<br>æ‹¦æˆªç»“æœé›†çš„å¤„ç†<br>æ‹¦æˆªSqlè¯­æ³•æ„å»ºçš„å¤„ç†</p>
</blockquote>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Intercepts(&#123;@Signature(</span></span><br><span class="line"><span class="meta">        type= Executor.class,</span></span><br><span class="line"><span class="meta">        method = &quot;update&quot;,</span></span><br><span class="line"><span class="meta">        args = &#123;MappedStatement.class,Object.class&#125;)&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> <span class="keyword">implements</span> <span class="title class_">Interceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Invocation invocation)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">		<span class="comment">//æ‹¦æˆªæ–¹æ³•ï¼Œå…·ä½“ä¸šåŠ¡é€»è¾‘ç¼–å†™çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">return</span> invocation.proceed();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">plugin</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">		<span class="comment">//åˆ›å»ºtargetå¯¹è±¡çš„ä»£ç†å¯¹è±¡,ç›®çš„æ˜¯å°†å½“å‰æ‹¦æˆªå™¨åŠ å…¥åˆ°è¯¥å¯¹è±¡ä¸­</span></span><br><span class="line">        <span class="keyword">return</span> Plugin.wrap(target, <span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProperties</span><span class="params">(Properties properties)</span> &#123;</span><br><span class="line">		<span class="comment">//å±æ€§è®¾ç½®</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æ‰§è¡Œåˆ†ææ’ä»¶"><a href="#æ‰§è¡Œåˆ†ææ’ä»¶" class="headerlink" title="æ‰§è¡Œåˆ†ææ’ä»¶"></a><strong>æ‰§è¡Œåˆ†ææ’ä»¶</strong></h1><blockquote>
<p>åœ¨MPä¸­æä¾›äº†å¯¹SQLæ‰§è¡Œçš„åˆ†æçš„æ’ä»¶ï¼Œå¯ç”¨ä½œé˜»æ–­å…¨è¡¨æ›´æ–°ã€åˆ é™¤çš„æ“ä½œï¼Œæ³¨æ„ï¼šè¯¥æ’ä»¶ä»…é€‚ç”¨äºå¼€å‘ç¯å¢ƒï¼Œä¸ é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ </p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class MpConfig &#123;</span><br><span class="line">    @Bean</span><br><span class="line">    public MybatisPlusInterceptor mybatisPlusInterceptor()&#123;</span><br><span class="line">        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();</span><br><span class="line">        //åˆ†é¡µæ’ä»¶</span><br><span class="line">        interceptor.addInnerInterceptor(new PaginationInnerInterceptor());</span><br><span class="line">        //æ›´æ–°åˆ é™¤é˜»æ–­å™¨æ’ä»¶</span><br><span class="line">        interceptor.addInnerInterceptor(new BlockAttackInnerInterceptor());</span><br><span class="line">        return interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æ€§èƒ½åˆ†ææ’ä»¶ï¼ˆåˆ†ææ‰“å°æ’ä»¶ï¼‰"><a href="#æ€§èƒ½åˆ†ææ’ä»¶ï¼ˆåˆ†ææ‰“å°æ’ä»¶ï¼‰" class="headerlink" title="æ€§èƒ½åˆ†ææ’ä»¶ï¼ˆåˆ†ææ‰“å°æ’ä»¶ï¼‰"></a><strong>æ€§èƒ½åˆ†ææ’ä»¶ï¼ˆåˆ†ææ‰“å°æ’ä»¶ï¼‰</strong></h1><p>å¯¼åæ ‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--p6spy--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>p6spy<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>p6spy<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ymlé…ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.p6spy.engine.spy.P6SpyDriver</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:p6spy:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="number">1234</span></span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºæ–°é…ç½®æ–‡ä»¶ spy.properties </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#3.2.1ä»¥ä¸Šä½¿ç”¨</span><br><span class="line">modulelist=com.baomidou.mybatisplus.extension.p6spy.MybatisPlusLogFactory,com.p6spy.engine.outage.P6OutageFactory</span><br><span class="line">#3.2.1ä»¥ä¸‹ä½¿ç”¨æˆ–è€…ä¸é…ç½®</span><br><span class="line">#modulelist=com.p6spy.engine.logging.P6LogFactory,com.p6spy.engine.outage.P6OutageFactory</span><br><span class="line"># è‡ªå®šä¹‰æ—¥å¿—æ‰“å°</span><br><span class="line">logMessageFormat=com.baomidou.mybatisplus.extension.p6spy.P6SpyLogger</span><br><span class="line">#æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°</span><br><span class="line">appender=com.baomidou.mybatisplus.extension.p6spy.StdoutLogger</span><br><span class="line"># ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿè®°å½• sql</span><br><span class="line">#appender=com.p6spy.engine.spy.appender.Slf4JLogger</span><br><span class="line"># è®¾ç½® p6spy driver ä»£ç†</span><br><span class="line">deregisterdrivers=true</span><br><span class="line"># å–æ¶ˆJDBC URLå‰ç¼€</span><br><span class="line">useprefix=true</span><br><span class="line"># é…ç½®è®°å½• Log ä¾‹å¤–,å¯å»æ‰çš„ç»“æœé›†æœ‰error,info,batch,debug,statement,commit,rollback,result,resultset.</span><br><span class="line">excludecategories=info,debug,result,commit,resultset</span><br><span class="line"># æ—¥æœŸæ ¼å¼</span><br><span class="line">dateformat=yyyy-MM-dd HH:mm:ss</span><br><span class="line"># å®é™…é©±åŠ¨å¯å¤šä¸ª</span><br><span class="line">#driverlist=org.h2.Driver</span><br><span class="line"># æ˜¯å¦å¼€å¯æ…¢SQLè®°å½•</span><br><span class="line">outagedetection=true</span><br><span class="line"># æ…¢SQLè®°å½•æ ‡å‡† 2 ç§’</span><br><span class="line">outagedetectioninterval=2</span><br><span class="line"># çœŸå®JDBC driver</span><br><span class="line">driverlist=com.mysql.cj.jdbc.Driver</span><br></pre></td></tr></table></figure>

<h1 id="ä¹è§‚é”æ’ä»¶"><a href="#ä¹è§‚é”æ’ä»¶" class="headerlink" title="ä¹è§‚é”æ’ä»¶"></a><strong>ä¹è§‚é”æ’ä»¶</strong></h1><p><strong>æ„å›¾</strong>ï¼š å½“è¦æ›´æ–°ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œå¸Œæœ›è¿™æ¡è®°å½•æ²¡æœ‰è¢«åˆ«äººæ›´æ–° </p>
<blockquote>
<p><strong>ä¹è§‚é”å®ç°æ–¹å¼</strong><br>å–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰version<br>æ›´æ–°æ—¶å¸¦ä¸Šè¿™ä¸ªversion<br>æ‰§è¡Œæ›´æ–°æ—¶set version = newVersion where version = oldVersion<br>å¦‚æœversionä¸å¯¹ï¼Œå°±æ›´æ–°å¤±è´¥ </p>
</blockquote>
<p><strong>æ­¥éª¤</strong></p>
<p>1.æ·»åŠ æ•°æ®åº“å­—æ®µ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE `tb_user`</span><br><span class="line">ADD COLUMN `version` int(10) NULL AFTER `email`;</span><br><span class="line">UPDATE `tb_user` SET `version`=&#x27;1&#x27;;</span><br></pre></td></tr></table></figure>

<p>2.ä¿®æ”¹å®ä½“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Version</span><br><span class="line">private Integer version;</span><br></pre></td></tr></table></figure>

<p>3.æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testupdate</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setId(<span class="number">12</span>);</span><br><span class="line">    user.setPassword(<span class="string">&quot;xuxuadasdx&quot;</span>);</span><br><span class="line">    user.setVersion(<span class="number">2</span>); <span class="comment">//è·å–åˆ°versionä¸º1</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userDao.updateById(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„</strong>ï¼š</p>
<p>æ¯æ¬¡ä¿®æ”¹ï¼Œæ›´æ–°éƒ½éœ€è¦æŸ¥æ‰¾versionï¼Œå†ä»£å…¥version</p>
<p>æ”¯æŒçš„æ•°æ®ç±»å‹åªæœ‰:int,Integer,long,Long,Date,Timestamp,LocalDateTime </p>
<p>æ•´æ•°ç±»å‹ä¸‹ newVersion = oldVersion + 1 </p>
<p>newVersion ä¼šå›å†™åˆ° entity ä¸­</p>
<p>ä»…æ”¯æŒ updateById(id) ä¸ update(entity, wrapper) æ–¹æ³• </p>
<p>åœ¨ update(entity, wrapper) æ–¹æ³•ä¸‹, wrapper ä¸èƒ½å¤ç”¨!!!  </p>
<h1 id="SQLæ³¨å…¥å™¨ï¼ˆç•¥ï¼‰"><a href="#SQLæ³¨å…¥å™¨ï¼ˆç•¥ï¼‰" class="headerlink" title="SQLæ³¨å…¥å™¨ï¼ˆç•¥ï¼‰"></a><strong>SQLæ³¨å…¥å™¨ï¼ˆç•¥ï¼‰</strong></h1><h1 id="è‡ªåŠ¨å¡«å……"><a href="#è‡ªåŠ¨å¡«å……" class="headerlink" title="è‡ªåŠ¨å¡«å……"></a><strong>è‡ªåŠ¨å¡«å……</strong></h1><table>
<thead>
<tr>
<th><strong>DEFALUT</strong></th>
<th><strong>é»˜è®¤ä¸å¤„ç†</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>INSERT</strong></td>
<td><strong>æ’å…¥å¡«å……å­—æ®µ</strong></td>
</tr>
<tr>
<td><strong>UPDATE</strong></td>
<td><strong>æ›´æ–°å¡«å……å­—æ®µ</strong></td>
</tr>
<tr>
<td><strong>INSERT_UPDATE</strong></td>
<td><strong>æ’å…¥å’Œæ›´æ–°å¡«å……å­—æ®µ</strong></td>
</tr>
</tbody></table>
<p>ä½¿ç”¨ï¼š</p>
<p>1.åœ¨å®ä½“ç±»ä¸Šæ·»åŠ æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> String password;</span><br></pre></td></tr></table></figure>

<p>2.å†™ MyMetaObjectHandler ç±»ï¼ˆç»§æ‰¿MetaObjectHandlerï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">password</span> <span class="operator">=</span> getFieldValByName(<span class="string">&quot;password&quot;</span>, metaObject);</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == password) &#123;</span><br><span class="line">            <span class="comment">//å­—æ®µä¸ºç©ºï¼Œå¯ä»¥è¿›è¡Œå¡«å……</span></span><br><span class="line">            setFieldValByName(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>, metaObject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šMyMetaObjectHandler ç±»éœ€è¦æ·»åŠ åˆ°springå®¹å™¨ä¸­</p>
<h1 id="é€»è¾‘åˆ é™¤"><a href="#é€»è¾‘åˆ é™¤" class="headerlink" title="é€»è¾‘åˆ é™¤"></a><strong>é€»è¾‘åˆ é™¤</strong></h1><p> é€»è¾‘åˆ é™¤å°±æ˜¯å°†æ•°æ®æ ‡è®°ä¸ºåˆ é™¤ï¼Œè€Œå¹¶éçœŸæ­£ çš„ç‰©ç†åˆ é™¤ </p>
<p>æ­¥éª¤ï¼š</p>
<p>1.ä¿®æ”¹è¡¨ç»“æ„</p>
<p>è¡¨ç¤ºï¼š1åˆ é™¤ï¼Œ0æœªåˆ é™¤</p>
<p>2.ä¿®æ”¹å®ä½“ï¼Œå¢åŠ deletedå±æ€§å¹¶ä¸”æ·»åŠ @TableLogicæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">extends</span> <span class="title class_">Model</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> SexEnum sex;</span><br><span class="line">    <span class="meta">@TableLogic(value = &quot;0&quot;,delval = &quot;1&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;deleted&quot;,select = false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer deleted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  3.æ·»åŠ é…ç½®</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šæ‰€æœ‰çš„è¯­å¥éƒ½ä¼šå¸¦and deleted = 0ï¼Œæƒ³è¦æŸ¥è¯¢æˆ–æ“ä½œè¢«åˆ é™¤çš„æ•°æ®éœ€è¦è‡ªå·±å†™xml çš„sqlè¯­å¥</p>
<h1 id="è‡ªå®šä¹‰æšä¸¾"><a href="#è‡ªå®šä¹‰æšä¸¾" class="headerlink" title="è‡ªå®šä¹‰æšä¸¾"></a><strong>è‡ªå®šä¹‰æšä¸¾</strong></h1><p>æ­¥éª¤ï¼š</p>
<p>1.ä¿®æ”¹è¡¨ç»“æ„ï¼Œè®¾ç½®ä¸º1ä½æ•°å­—        0ç”·1å¥³</p>
<p>2.å®šä¹‰æšä¸¾</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public enum SexEnum implements IEnum&lt;Integer&gt; &#123;</span><br><span class="line">    MAM(0, &quot;ç”·&quot;),</span><br><span class="line">    WOMAN(1, &quot;å¥³&quot;),</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">    private int value;</span><br><span class="line">    private String desc;</span><br><span class="line"></span><br><span class="line">    SexEnum(int value, String desc) &#123;</span><br><span class="line">        this.value = value;</span><br><span class="line">        this.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public Integer getValue() &#123;</span><br><span class="line">        return this.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getDesc() &#123;</span><br><span class="line">        return this.desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.æ·»åŠ é…ç½®â€”â€”æšä¸¾åŒ…æ‰«æ</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">type-enums-package:</span> <span class="string">com.example</span></span><br></pre></td></tr></table></figure>

<p>4.ä¿®æ”¹å®ä½“â€”â€”ä½¿ç”¨æšä¸¾ç±»å‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private SexEnum sex;</span><br></pre></td></tr></table></figure>

<p>5.æšä¸¾api</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> user.getSex().toString();</span><br><span class="line"><span class="type">SexEnum</span> <span class="variable">sex</span> <span class="operator">=</span> user.getSex();</span><br><span class="line"><span class="type">String</span> <span class="variable">desc</span> <span class="operator">=</span> sex.getDesc();</span><br><span class="line"><span class="type">Integer</span> <span class="variable">value</span> <span class="operator">=</span> sex.getValue();</span><br></pre></td></tr></table></figure>

<h1 id="é…ç½®å¤§å…¨"><a href="#é…ç½®å¤§å…¨" class="headerlink" title="é…ç½®å¤§å…¨"></a>é…ç½®å¤§å…¨</h1><h3 id="config-location-åŠ è½½mybatisé…ç½®æ–‡ä»¶"><a href="#config-location-åŠ è½½mybatisé…ç½®æ–‡ä»¶" class="headerlink" title="config-location(åŠ è½½mybatisé…ç½®æ–‡ä»¶)"></a><strong>config-location(åŠ è½½mybatisé…ç½®æ–‡ä»¶)</strong></h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">config-location:</span> <span class="string">classpath:mybatis-config.xml</span></span><br></pre></td></tr></table></figure>

<h3 id="mapper-locations-åŠ è½½sqlçš„xmlæ–‡ä»¶"><a href="#mapper-locations-åŠ è½½sqlçš„xmlæ–‡ä»¶" class="headerlink" title="mapper-locations(åŠ è½½sqlçš„xmlæ–‡ä»¶)"></a><strong>mapper-locations(åŠ è½½sqlçš„xmlæ–‡ä»¶)</strong></h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:com/example/dao/*.xml</span></span><br></pre></td></tr></table></figure>

<h3 id="table-prefix-è®¾ç½®æ‰€æœ‰è¡¨çš„é€šç”¨å‰ç¼€åç§°"><a href="#table-prefix-è®¾ç½®æ‰€æœ‰è¡¨çš„é€šç”¨å‰ç¼€åç§°" class="headerlink" title="table-prefix(è®¾ç½®æ‰€æœ‰è¡¨çš„é€šç”¨å‰ç¼€åç§°)"></a><strong>table-prefix(è®¾ç½®æ‰€æœ‰è¡¨çš„é€šç”¨å‰ç¼€åç§°)</strong></h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tb_</span>        <span class="comment">#è®¾ç½®æ‰€æœ‰è¡¨çš„é€šç”¨å‰ç¼€åç§°ä¸ºtbl_</span></span><br></pre></td></tr></table></figure>

<p>è§£å†³è¡¨åä¸åŒ¹é…é—®é¢˜ï¼Œæ•°æ®åº“è¡¨åä¸º ï¼š å‰ç¼€+å®ä½“ç±»åï¼ˆé¦–å­—æ¯å°å†™ï¼‰</p>
<h3 id="id-type-idè‡ªå¢é•¿"><a href="#id-type-idè‡ªå¢é•¿" class="headerlink" title="id-type(idè‡ªå¢é•¿)"></a><strong>id-type(idè‡ªå¢é•¿)</strong></h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span>                <span class="comment">#è®¾ç½®idè‡ªåŠ¨å¢é•¿æ¨¡å¼ä¸ºè‡ªå¢é•¿</span></span><br></pre></td></tr></table></figure>

<h3 id="datasource-æ•°æ®æºé…ç½®"><a href="#datasource-æ•°æ®æºé…ç½®" class="headerlink" title="datasource(æ•°æ®æºé…ç½®)"></a><strong>datasource(æ•°æ®æºé…ç½®)</strong></h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ•°æ®æºç›¸å…³ä¿¡æ¯</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="number">1234</span></span><br></pre></td></tr></table></figure>

<h3 id="typeAliasesPackage-èµ·åˆ«å"><a href="#typeAliasesPackage-èµ·åˆ«å" class="headerlink" title="typeAliasesPackage (èµ·åˆ«å)"></a><strong>typeAliasesPackage (èµ·åˆ«å)</strong></h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.example.pojo</span></span><br></pre></td></tr></table></figure>

<h3 id="map-underscore-to-camel-case-å¼€å¯å­—æ®µåå®ä½“åè½¬æ¢"><a href="#map-underscore-to-camel-case-å¼€å¯å­—æ®µåå®ä½“åè½¬æ¢" class="headerlink" title="map-underscore-to-camel-case(å¼€å¯å­—æ®µåå®ä½“åè½¬æ¢)"></a><strong>map-underscore-to-camel-case(å¼€å¯å­—æ®µåå®ä½“åè½¬æ¢)</strong></h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="cacheEnabled-å¼€å¯æˆ–å…³é—­é…ç½®çš„ç¼“å­˜"><a href="#cacheEnabled-å¼€å¯æˆ–å…³é—­é…ç½®çš„ç¼“å­˜" class="headerlink" title="cacheEnabled(å¼€å¯æˆ–å…³é—­é…ç½®çš„ç¼“å­˜)"></a><strong>cacheEnabled(å¼€å¯æˆ–å…³é—­é…ç½®çš„ç¼“å­˜)</strong></h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">cache-enabled:</span> <span class="literal">false</span> <span class="comment">#ï¼ˆé»˜è®¤trueï¼‰</span></span><br></pre></td></tr></table></figure>

<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css"></div></section><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="æ‰“èµ" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><span class="icon iconify" data-icon="ri:hand-coin-line"></span></span><div id="reward-comment">I'm so cute. Please give me money.</div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>å¾é‘«</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="http://example.com/2022/09/22/mybatis/MyBatis-plus/" title="MyBatis-plus">http://example.com/2022/09/22/mybatis/MyBatis-plus/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> è®¸å¯åè®®ã€‚</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/09/26/javaweb/%E6%97%A5%E5%B8%B8%E5%BC%80%E5%8F%91/" rel="prev" title="æ—¥å¸¸å¼€å‘"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">æ—¥å¸¸å¼€å‘</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/09/22/mybatis/MyBatis/" rel="next" title="MyBatis"><span class="post-nav-text">MyBatis</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 â€“ 2022 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> å¾é‘«</span></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></body></html>